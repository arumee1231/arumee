<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" name="viewport"/>
<meta content="#ffffff" name="theme-color"/>
<meta content="default" name="apple-mobile-web-app-status-bar-style"/>
<meta content="index,follow" name="robots"/>
<link href="https://www.arumee.example/" rel="canonical"/>
<meta content="Arumee â€” Premium Coldâ€‘Pressed Oils" property="og:title"/>
<meta content="Pure, natural, traditionally pressed coconut, groundnut &amp; gingelly oils. Fresh, authentic, nutrient-rich." property="og:description"/>
<meta content="website" property="og:type"/>
<meta content="https://www.arumee.example/" property="og:url"/>
<meta content="https://www.arumee.example/arumee_assets/logo.png" property="og:image"/>
<meta content="summary" name="twitter:card"/>
<meta content="Arumee â€” Premium Coldâ€‘Pressed Oils" name="twitter:title"/>
<meta content="Pure, natural, traditionally pressed coconut, groundnut &amp; gingelly oils." name="twitter:description"/>
<meta content="https://www.arumee.example/arumee_assets/logo.png" name="twitter:image"/>
<title>Arumee â€” Premium Coldâ€‘Pressed Oils</title>
<meta content="Arumee â€” Premium coldâ€‘pressed oils. Pure, natural, and traditionally pressed coconut, groundnut, and gingelly oils." name="description"/>
<link href="arumee_assets/favicon.png" rel="icon" type="image/png"/>
<!-- Preload critical hero assets to reduce flicker -->
<link as="image" fetchpriority="high" href="arumee_assets/logo.png" rel="preload"/>
<link as="image" href="arumee_assets/Natural.png" rel="preload"/>
<!-- Preconnect & use font-display swap already configured; ensure fast font load -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;800&amp;family=Inter:wght@400;500;600&amp;display=swap" rel="stylesheet"/>
<!-- Shared unified cart styles -->
<link href="arumee_assets/cart.css" rel="stylesheet"/>
<!-- Removed inline Our Oils cart overrides â€“ unified in arumee_assets/cart.css -->
<!-- Skip link for accessibility -->
<style>
    .skip-link { position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden; }
    .skip-link:focus { position:fixed; left:16px; top:16px; width:auto; height:auto; padding:10px 14px; background:#000; color:#fff; z-index:10001; border-radius:8px; }
  </style>
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Store",
    "name": "Arumee",
    "url": "https://www.arumee.example/",
    "logo": "https://www.arumee.example/arumee_assets/logo.png",
    "description": "Premium cold-pressed coconut, groundnut, and gingelly oils.",
    "currenciesAccepted": "INR",
    "areaServed": "IN",
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "Cold Pressed Oils",
      "itemListElement": [
        {"@type":"Offer","itemOffered":{"@type":"Product","name":"Coldâ€‘Pressed Coconut Oil","category":"Grocery","image":"https://www.arumee.example/arumee_assets/mockup_coconut.png"}},
        {"@type":"Offer","itemOffered":{"@type":"Product","name":"Coldâ€‘Pressed Groundnut Oil","category":"Grocery","image":"https://www.arumee.example/arumee_assets/mockup_groundnut.png"}},
        {"@type":"Offer","itemOffered":{"@type":"Product","name":"Coldâ€‘Pressed Gingelly Oil","category":"Grocery","image":"https://www.arumee.example/arumee_assets/mockup_gingelly.png"}}
      ]
    }
  }
  </script>
<style>
    :root {
      --green: #1e4d32;
      --green-dark: #153d28;
      --gold: #9d7c2a;
      --gold-light: #b8941f;
      --cream: #faf8f5;
      --ink: #0a2817;
      --accent: #8b4513;
      --shadow-sm: 0 2px 8px rgba(30, 77, 50, 0.08);
      --shadow-md: 0 4px 16px rgba(30, 77, 50, 0.12);
      --shadow-lg: 0 8px 32px rgba(30, 77, 50, 0.16);
      --shadow-xl: 0 16px 48px rgba(30, 77, 50, 0.2);
      --transition-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    }
    * { box-sizing: border-box; }
    /* Force form inputs to be editable - override any blocking */
    input[name="name"],
    input[name="phone"],
    input[name="address"],
    textarea[name="notes"] {
      pointer-events: auto !important;
      user-select: text !important;
      -webkit-user-select: text !important;
    }
    html {
      overflow-x: hidden;
      width: 100%;
      scroll-behavior: smooth;
    }
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      color: var(--ink);
      background: var(--cream);
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
      width: 100%;
      position: relative;
    }
    /* Prevent initial flash: fade hero brand in after load */
    header.hero .brand { opacity: 0; transform: translateY(10px); transition: opacity .4s ease, transform .4s ease; }
    body.hero-ready header.hero .brand { opacity: 1; transform: translateY(0); }
    .container { width: min(1200px, 92vw); margin: 0 auto; }

    /* STICKY NAVIGATION BAR */
    .sticky-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(30, 77, 50, 0.1);
      z-index: 9997;
      transform: translateY(-100%);
      transition: transform 0.3s var(--transition-smooth);
      box-shadow: var(--shadow-md);
    }
    .sticky-nav.visible {
      transform: translateY(0);
    }
    .sticky-nav .nav-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 0;
      max-width: 1200px;
      margin: 0 auto;
      padding-left: 4vw;
      padding-right: 4vw;
    }
    .sticky-nav .nav-brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-family: 'Playfair Display', serif;
      font-size: 24px;
      font-weight: 800;
      color: var(--green);
    }
    .sticky-nav .nav-brand img {
      width: 40px;
      height: 40px;
      border-radius: 8px;
    }
    .sticky-nav .nav-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .sticky-nav .nav-btn {
      padding: 8px 20px;
      border-radius: 999px;
      border: 2px solid var(--green);
      background: white;
      color: var(--green);
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      position: relative;
    }
    .sticky-nav .nav-btn.primary {
      background: var(--green);
      color: white;
    }
    .sticky-nav .nav-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    .nav-cart-count {
      background: var(--gold);
      color: white;
      border-radius: 50%;
      min-width: 20px;
      height: 20px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
      padding: 0 6px;
    }

    /* TRUST BADGES */
    .trust-badges {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 24px;
      margin-top: 24px;
      flex-wrap: wrap;
    }
    .trust-badge {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 18px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 14px;
      border: 1px solid rgba(30, 77, 50, 0.2);
      font-size: 13px;
      font-weight: 600;
      color: var(--green);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 8px rgba(30, 77, 50, 0.08),
                  0 1px 3px rgba(157, 124, 42, 0.05);
      animation: fade-in-up 0.6s ease both;
      position: relative;
      overflow: hidden;
    }
    .trust-badge::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(157, 124, 42, 0.1), transparent);
      transition: left 0.6s ease;
    }
    .trust-badge:hover::before {
      left: 100%;
    }
    .trust-badge:nth-child(1) { animation-delay: 0.6s; }
    .trust-badge:nth-child(2) { animation-delay: 0.7s; }
    .trust-badge:nth-child(3) { animation-delay: 0.8s; }
    .trust-badge:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 8px 20px rgba(30, 77, 50, 0.15),
                  0 4px 8px rgba(157, 124, 42, 0.1);
      border-color: var(--gold);
      background: rgba(255, 255, 255, 1);
    }
    .trust-badge-icon {
      font-size: 20px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 28px;
      height: 28px;
      transition: transform 0.3s ease;
    }
    .trust-badge:hover .trust-badge-icon {
      transform: scale(1.1) rotate(5deg);
    }
    
    /* Checkmark icon gets circular background */
    .trust-badge:first-child .trust-badge-icon {
      background: var(--green) !important;
      color: #ffffff !important;
      border-radius: 50% !important;
      font-weight: 900 !important;
      font-size: 16px !important;
      line-height: 1 !important;
      padding: 4px !important;
      display: inline-flex !important;
      align-items: center !important;
      justify-content: center !important;
      width: 24px !important;
      height: 24px !important;
      box-shadow: 0 2px 6px rgba(30, 77, 50, 0.2);
    }
    .trust-badge:first-child:hover .trust-badge-icon {
      box-shadow: 0 4px 12px rgba(30, 77, 50, 0.3);
    }

    /* HERO NAVIGATION TABS (separate bar below hero) */
    .hero-tabs-wrapper {
      position: sticky;
      top: 0; /* stays at very top after hero scrolls out */
      background: linear-gradient(90deg, rgba(14,40,31,0.85), rgba(30,77,50,0.85));
      backdrop-filter: blur(14px) saturate(140%);
      -webkit-backdrop-filter: blur(14px) saturate(140%);
      border-top: 1px solid rgba(255,255,255,0.05);
      border-bottom: 2px solid rgba(157, 124, 42, 0.4);
      box-shadow: 0 4px 20px -4px rgba(0,0,0,0.35);
      z-index: 1200;
    }
    .hero-nav {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 12px 24px 0;
      max-width: 1100px;
      margin: 0 auto;
      position: relative;
      z-index: 6;
      animation: fade-in-up 0.5s ease 0.15s both;
    }
    .hero-nav-tab {
      padding: 10px 22px;
      background: rgba(255, 255, 255, 0.07);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px 10px 0 0;
      color: rgba(255, 255, 255, 0.85);
      font-size: 13px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.35s var(--transition-smooth);
      cursor: pointer;
      position: relative;
      /* allow decorative underline to extend outside the tab box */
      overflow: visible;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }
    .hero-nav-tab::before {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--gold);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }
    .hero-nav-tab:hover {
      background: rgba(255, 255, 255, 0.14);
      border-color: rgba(157, 124, 42, 0.55);
      color: #ffffff;
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.35);
    }
    .hero-nav-tab:hover::before {
      transform: scaleX(1);
    }
    /* stronger active tab styles for clear differentiation */
    .hero-nav-tab.active {
      background: linear-gradient(180deg, rgba(21,61,40,1), rgba(30,77,50,1));
      color: #fff;
      font-weight: 800;
      position: relative;
      box-shadow: 0 6px 18px rgba(16,45,33,0.18);
    }
    /* gold underline accent for active tab (placed slightly below the tab) */
    .hero-nav-tab.active::after {
      content: '';
      position: absolute;
      left: 12px;
      right: 12px;
      bottom: -8px;
      height: 4px;
      border-radius: 4px;
      background: linear-gradient(90deg, var(--gold-light), var(--gold));
      box-shadow: 0 4px 12px rgba(157,124,42,0.18);
    }
    /* keyboard focus styles for accessibility */
    .hero-nav-tab:focus {
      outline: 3px solid rgba(157,124,42,0.18);
      outline-offset: 4px;
      border-radius: 6px;
    }

    /* BENEFIT CARDS */
    .benefit-card {
      background: linear-gradient(135deg, rgba(250, 248, 245, 0.5), rgba(255, 255, 255, 0.8));
      border: 1px solid rgba(30, 77, 50, 0.1);
    }
    .benefit-card:hover {
      background: white;
      transform: translateY(-4px);
      box-shadow: var(--shadow-md);
      border-color: var(--gold);
    }
    /* Force white tick only for the FSSAI Certified (3rd) benefit icon */
    #benefits .benefit-card:nth-child(3) > div:first-child {
      color: #ffffff !important;
      text-shadow: 0 1px 2px rgba(0,0,0,0.25);
    }

    /* MODERN HERO WITH ANIMATED GRADIENT */
    header.hero {
      position: relative;
      /* Reduced vertical padding for more compact hero */
      padding: 28px 0 34px;
      background: linear-gradient(135deg, #0f2922 0%, #1e4d32 25%, #2a5f42 50%, #1e4d32 75%, #0f2922 100%);
      background-size: 400% 400%;
      animation: gradient-shift 15s ease infinite;
      overflow: hidden;
      border-bottom: 4px solid var(--gold);
    }
    
    @keyframes gradient-shift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    /* Animated overlay patterns */
    header.hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(157, 124, 42, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(184, 148, 31, 0.1) 0%, transparent 40%),
        radial-gradient(circle at 40% 80%, rgba(30, 77, 50, 0.1) 0%, transparent 50%);
      animation: pattern-pulse 20s ease infinite;
      z-index: 0;
    }
    
    @keyframes pattern-pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }
    
    /* Subtle texture overlay */
    header.hero::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      opacity: 0.3;
      z-index: 0;
      pointer-events: none;
    }
    .brand { 
      display: flex; 
      align-items: center; 
      gap: 26px; 
      position: relative; 
      z-index: 1;
      animation: fade-in-up 0.8s ease 0.2s both;
      flex-wrap: wrap;
    }
    
    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Enhanced logo visibility */
    .brand img { 
      width: 110px; 
      height: 110px; 
      border-radius: 24px; 
      background: radial-gradient(circle at 50% 50%, #ffffff 0%, #fff8e6 50%, rgba(255,255,255,0) 70%);
      padding: 8px; /* halo padding */
      border: 2px solid var(--gold-light);
      box-shadow: 
        0 10px 34px -6px rgba(0, 0, 0, 0.5),
        0 0 0 4px rgba(255,255,255,0.16),
        0 0 0 2px rgba(157,124,42,0.45),
        0 4px 12px rgba(157, 124, 42, 0.3);
      transition: all 0.45s cubic-bezier(.17,.67,.25,1.25);
      filter: brightness(1.09) contrast(1.04);
      position: relative;
      isolation: isolate;
    }
    .brand img::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background: radial-gradient(circle at 50% 40%, rgba(255,255,255,0.6), rgba(255,255,255,0) 70%);
      mix-blend-mode: overlay;
      pointer-events: none;
    }
    .brand img:hover {
      transform: scale(1.06) rotate(2deg);
      box-shadow: 
        0 18px 52px -6px rgba(0, 0, 0, 0.6),
        0 0 0 8px rgba(255,255,255,0.22),
        0 0 0 2px rgba(184,148,31,0.65),
        0 12px 28px rgba(157, 124, 42, 0.45);
      border-color: var(--gold);
      filter: brightness(1.18) contrast(1.08);
    }
    
    .name { 
      font-family: 'Playfair Display', serif; 
      font-size: clamp(36px, 5.2vw, 48px);
      font-weight: 800; 
      color: #ffffff;
      line-height: 1.08;
      letter-spacing: -0.5px;
      text-shadow: 
        0 2px 3px rgba(0, 0, 0, 0.25),
        0 3px 6px rgba(0, 0, 0, 0.18),
        0 0 30px rgba(157, 124, 42, 0.25);
      animation: fade-in-up 0.8s ease 0.3s both;
    }
    
    .tagline { 
      font-size: clamp(13px, 2vw, 16px);
      color: rgba(255, 255, 255, 0.88);
      font-weight: 600;
      margin-top: 6px;
      letter-spacing: 0.4px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
      animation: fade-in-up 0.8s ease 0.4s both;
    }
    
    /* Modern Hero CTAs */
    .hero-cta { 
      margin-top: 30px; 
      display: flex; 
      gap: 18px; 
      flex-wrap: wrap;
      animation: fade-in-up 0.8s ease 0.5s both;
    }
    /* Modern Button Styles with Micro-interactions */
    .btn {
      padding: 16px 36px;
      border-radius: 999px;
      border: none;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      text-decoration: none;
      position: relative;
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    
    /* Ripple effect on click */
    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
      pointer-events: none;
    }
    .btn:active::before {
      width: 300px;
      height: 300px;
      transition: width 0s, height 0s;
    }
    
    /* Shimmer effect */
    .btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -100%;
      width: 50%;
      height: 200%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transform: skewX(-20deg);
      transition: left 0.6s ease;
    }
    .btn:hover::after {
      left: 150%;
    }
    
    .btn.fill {
      background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
      color: white;
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.2) inset;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }
    
    .btn.fill:hover { 
      transform: translateY(-4px) scale(1.05); 
      box-shadow: 
        0 15px 40px rgba(157, 124, 42, 0.5),
        0 0 0 2px rgba(255, 255, 255, 0.3) inset;
    }
    
    .btn.outline {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      color: var(--green);
      border: 2px solid var(--green);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      font-weight: 600;
    }
    
    .btn.outline:hover {
      background: rgba(255, 255, 255, 1);
      border-color: var(--gold);
      color: var(--gold);
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
    }
    
    .btn:active {
      transform: translateY(-2px) scale(0.98);
    }
    
    .btn:focus-visible {
      outline: 3px solid rgba(157, 124, 42, 0.6);
      outline-offset: 4px;
    }

    /* Removed duplicate inline cart styles; using shared cart.css for all cart visuals */

    /* SECTIONS */
    section { 
      padding: 60px 0; 
      opacity: 0; 
      transform: translateY(30px); 
      transition: all 0.8s var(--transition-smooth);
    }
    section.visible { 
      opacity: 1; 
      transform: translateY(0); 
    }
    
    /* First section (oils) should have less top padding */
    section#oils {
      padding-top: 40px;
    }

    h2.section-title {
      font-family: 'Playfair Display', serif;
      font-size: 48px;
      color: var(--green);
      text-align: center;
      margin-bottom: 12px;
      margin-top: 0;
      font-weight: 800;
      letter-spacing: -1px;
      position: relative;
      display: inline-block;
      width: 100%;
    }
    h2.section-title::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: linear-gradient(90deg, var(--gold), var(--gold-light));
      border-radius: 2px;
    }
    p.lead { 
      text-align: center; 
      font-size: 19px; 
      color: #1a4a2f; 
      margin-bottom: 48px; 
      margin-top: 20px;
      font-weight: 500;
      letter-spacing: 0.3px;
    }

    /* PRODUCTS */
    .grid { display: grid; gap: 24px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
    .card {
      background: white;
      border-radius: 24px;
      border: 2px solid transparent;
      overflow: hidden;
      position: relative;
      transition: all 0.4s var(--transition-smooth);
      box-shadow: var(--shadow-sm);
      outline: none !important;
    }
    .card:focus {
      outline: none !important;
      border-color: transparent !important;
    }
    .card:focus-visible {
      outline: 2px solid var(--gold);
      outline-offset: 4px;
    }
    .card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 24px;
      padding: 2px;
      background: linear-gradient(135deg, var(--gold), var(--green));
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask-composite: exclude;
      opacity: 0;
      transition: opacity 0.4s ease;
      /* IMPORTANT: allow clicks to pass through overlay */
      pointer-events: none;
    }
    .card:hover::before {
      opacity: 1;
    }
    .card:hover { 
      transform: translateY(-8px) scale(1.02); 
      box-shadow: var(--shadow-xl);
    }
    
    /* Product Badge */
    .product-badge {
      position: absolute;
      top: 16px;
      right: 16px;
      background: linear-gradient(135deg, var(--gold), var(--gold-light));
      color: white;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 11px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      z-index: 2;
      box-shadow: var(--shadow-md);
    }
    
    .pic-wrap { 
      position: relative; 
      background: linear-gradient(135deg, #ffffff, #fafafa);
      padding: 20px; 
      text-align: center; 
      min-height: 220px; 
      display: flex; 
      align-items: center; 
      justify-content: center;
      cursor: zoom-in;
      overflow: hidden;
    }
    .pic-wrap::after {
      content: 'ðŸ”';
      position: absolute;
      bottom: 12px;
      right: 12px;
      background: rgba(255, 255, 255, 0.9);
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.3s ease;
      font-size: 14px;
      box-shadow: var(--shadow-sm);
    }
    .pic-wrap:hover::after {
      opacity: 1;
      transform: scale(1);
    }
    .pic-wrap img { 
      position: relative; 
      width: auto; 
      height: 180px; 
      max-width: 100%; 
      object-fit: contain;
      transition: transform 0.4s var(--transition-smooth);
      filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.08));
    }
    .pic-wrap:hover img {
      transform: scale(1.08);
    }
    .content { padding: 20px; }
    .pill { 
      display: inline-block; 
      font-weight: 800; 
      color: #fff; 
      background: linear-gradient(135deg, var(--green), #0d8f45); 
      border-radius: 999px; 
      padding: 6px 14px; 
      font-size: 12px;
      box-shadow: var(--shadow-sm);
      letter-spacing: 0.3px;
    }
    .title { 
      font-family: 'Inter', sans-serif; 
      font-size: 19px; 
      margin: 12px 0 8px; 
      font-weight: 700; 
      line-height: 1.3; 
      min-height: 50px; 
      display: flex; 
      align-items: center;
      color: var(--ink);
    }
    .price { 
      font-size: 28px; 
      font-weight: 800; 
      color: var(--green); 
      margin: 0 0 8px; 
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, var(--green), var(--green-dark));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .price span { 
      font-size: 14px; 
      color: #666; 
      font-weight: 500;
      -webkit-text-fill-color: #666;
    }
    .size-selector { margin: 12px 0; }
    .size-selector label { 
      display: block; 
      font-weight: 700; 
      color: var(--green); 
      margin-bottom: 8px; 
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .size-options { display: flex; gap: 8px; margin-bottom: 10px; }
    .size-option { 
      flex: 1; 
      padding: 10px 12px; 
      border: 2px solid #e0e0e0; 
      background: white; 
      color: var(--ink); 
      font-size: 13px; 
      font-weight: 700; 
      border-radius: 10px; 
      cursor: pointer; 
      transition: all 0.3s var(--transition-smooth); 
      text-align: center;
      position: relative;
    }
    .size-option.active { 
      background: linear-gradient(135deg, var(--green), var(--green-dark));
      color: white; 
      border-color: var(--green);
      box-shadow: var(--shadow-sm);
    }
    .size-option:hover:not(.active) { 
      background: linear-gradient(135deg, rgba(157, 124, 42, 0.1), rgba(157, 124, 42, 0.05));
      border-color: var(--gold); 
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
    }
    .quantity-selector { margin: 12px 0; }
    .quantity-selector label { 
      display: block; 
      font-weight: 700; 
      color: var(--green); 
      margin-bottom: 8px; 
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .quantity-stepper { 
      display: flex; 
      align-items: center; 
      gap: 10px;
      background: #f8f9fa;
      padding: 6px;
      border-radius: 12px;
      border: 2px solid #e0e0e0;
      transition: border-color 0.3s ease;
      position: relative;
      z-index: 10;
      user-select: none;
      -webkit-user-select: none;
    }
    .quantity-stepper:hover {
      border-color: var(--gold);
    }
    .quantity-stepper button { 
      width: 36px; 
      height: 36px; 
      border: none; 
      background: white; 
      color: var(--green); 
      font-size: 20px; 
      font-weight: 700; 
      border-radius: 10px; 
      cursor: pointer; 
      transition: all 0.3s var(--transition-smooth); 
      display: flex; 
      align-items: center; 
      justify-content: center;
      box-shadow: var(--shadow-sm);
      position: relative;
      z-index: 10;
      user-select: none;
      -webkit-user-select: none;
    }
    .quantity-stepper button:hover { 
      background: var(--green); 
      color: white;
      transform: scale(1.1);
    }
    .quantity-stepper button:active { transform: scale(0.95); }
    .quantity-stepper input { 
      flex: 1;
      min-width: 50px;
      height: 36px; 
      text-align: center; 
      font-size: 16px; 
      font-weight: 700; 
      border: none; 
      border-radius: 10px; 
      color: var(--green);
      background: white;
      user-select: none;
      -webkit-user-select: none;
    }
    .quantity-stepper input:focus { 
      outline: none; 
      box-shadow: 0 0 0 2px var(--gold);
    }
    .add-to-order { 
      width: 100%; 
      margin-top: 14px; 
      padding: 14px; 
      background: linear-gradient(135deg, var(--green), #0d8f45); 
      color: white; 
      border: none; 
      border-radius: 12px; 
      font-weight: 700; 
      font-size: 15px; 
      cursor: pointer; 
      transition: all 0.3s var(--transition-smooth);
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-md);
    }
    .add-to-order::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }
    .add-to-order:hover::before {
      width: 300px;
      height: 300px;
    }
    .add-to-order:hover { 
      background: linear-gradient(135deg, #0d8f45, var(--green)); 
      transform: translateY(-2px); 
      box-shadow: var(--shadow-lg);
    }
    .add-to-order:active { transform: translateY(0); }


    /* ORDER FORM */
    /* Remove default shadow around the form to avoid a persistent 'shade'.
       Show a subtle shadow only on hover or keyboard focus (for accessibility)
       and only on devices that support hovering to avoid mobile layout noise. */
    form.card { 
      padding: 48px; 
      max-width: 900px; 
      margin: 0 auto;
      box-shadow: none;
      border: none;
      transition: box-shadow 0.25s ease, transform 0.25s ease;
    }

    /* On hover-capable devices, reveal shadow on hover */
    @media (hover: hover) and (pointer: fine) {
      form.card:hover {
        box-shadow: var(--shadow-lg);
        transform: translateY(-4px);
      }
    }

    /* Always show a visible outline shadow when focused for keyboard users */
    form.card:focus-within {
      box-shadow: 0 10px 30px rgba(30,77,50,0.12);
      transform: translateY(-2px);
    }
    form.card::before {
      opacity: 0.5;
      /* Ensure form inputs beneath are clickable */
      pointer-events: none !important;
    }
    form input, form select, form textarea {
      width: 100%; 
      padding: 16px 20px; 
      border-radius: 12px; 
      border: 2px solid #e0e0e0;
      font-size: 16px; 
      margin-top: 8px; 
      transition: all 0.3s ease;
      font-family: 'Inter', sans-serif;
    }
    
    /* Form validation styles */
    form input:invalid:not(:focus):not(:placeholder-shown) {
      border-color: #dc3545;
      background-color: #fff5f5;
    }
    
    form input:valid:not(:focus):not(:placeholder-shown) {
      border-color: #28a745;
      background-color: #f0fff4;
    }
    
    form input:focus, form select:focus, form textarea:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(157, 124, 42, 0.1);
      background: white;
    }
    
    form label {
      font-weight: 600;
      color: var(--green);
      font-size: 14px;
      letter-spacing: 0.3px;
    }

    /* FOOTER */
    footer {
      background: linear-gradient(135deg, rgba(30,77,50,.08), rgba(157,124,42,.05));
      border-top: 1px solid rgba(30, 77, 50, 0.15);
      text-align: center;
      padding: 60px 0 40px;
      color: var(--green-dark);
      position: relative;
    }
    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
    }
    footer .tag { 
      background: transparent !important;
      mix-blend-mode: multiply;
      font-size: 20px; 
      margin-bottom: 16px;
      color: var(--green);
      font-weight: 600;
    }
    footer .mini { 
      font-size: 15px;
      color: #666;
      margin-top: 8px;
    }
    footer a {
      color: var(--green);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s ease;
    }
    footer a:hover {
      color: var(--gold);
    }

    /* TOAST NOTIFICATION */
    .toast { 
      position: fixed; 
      top: -100px; 
      left: 50%; 
      transform: translateX(-50%); 
      background: linear-gradient(135deg, rgba(30, 77, 50, 0.95), rgba(21, 61, 40, 0.95));
      color: white; 
      padding: 16px 32px; 
      border-radius: 16px; 
      font-weight: 600; 
      font-size: 15px; 
      z-index: 10001; 
      transition: all 0.4s var(--transition-smooth);
      box-shadow: var(--shadow-xl);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      opacity: 0;
      visibility: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
      max-width: 90vw;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .toast::before {
      content: 'âœ“';
      font-size: 20px;
      font-weight: 800;
      color: white;
      flex-shrink: 0;
    }
    .toast.show { 
      top: 24px;
      opacity: 1;
      visibility: visible;
    }

    /* SCROLL-TOP BUTTON */
    #scrollTop {
      position: fixed; 
      bottom: 30px; 
      right: 30px;
      width: 52px; 
      height: 52px;
      border-radius: 50%; 
      border: none;
      background: linear-gradient(135deg, var(--green), var(--green-dark));
      color: white;
      cursor: pointer; 
      font-size: 22px; 
      display: none;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-lg);
      transition: all 0.3s var(--transition-smooth);
      z-index: 999;
    }
    #scrollTop:hover { 
      background: linear-gradient(135deg, var(--gold), var(--gold-light));
      transform: translateY(-4px);
      box-shadow: var(--shadow-xl);
    }
    #scrollTop:active {
      transform: translateY(-2px);
    }

    /* WHATSAPP BUTTON */
    #whatsappBtn { 
      position: fixed; 
      bottom: 20px; 
      left: 20px; 
      background: transparent; 
      border-radius: 50%; 
      width: 60px; 
      height: 60px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      box-shadow: 0 4px 12px rgba(0,0,0,.15); 
      z-index: 999; 
      transition: all .3s ease; 
      text-decoration: none; 
    }
    #whatsappBtn img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
    }
    #whatsappBtn:hover { 
      transform: scale(1.1); 
      box-shadow: 0 6px 20px rgba(0,0,0,.25); 
    }

    /* CUSTOM MODAL */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      /* Ensure modals float above the cart (cart uses z-index:10000) */
      z-index: 10010;
      animation: fadeIn 0.3s ease;
    }
    .modal-overlay.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 20px;
      max-width: 320px;
      width: 90%;
      animation: slideIn 0.3s ease;
      position: relative;
      border: 2px solid var(--green);
    }
    .modal-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, var(--green), var(--green-dark));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      margin: 0 auto 12px;
      color: white;
      font-weight: 900;
    }
    .modal-title {
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      font-weight: 700;
      color: var(--green);
      text-align: center;
      margin: 0 0 10px;
    }
    .modal-message {
      font-size: 14px;
      line-height: 1.4;
      color: #333;
      text-align: center;
      margin-bottom: 16px;
    }
    .modal-message ul {
      list-style: none;
      padding: 0;
      margin: 12px 0;
      text-align: left;
    }
    .modal-message li {
      padding: 6px 0;
      padding-left: 24px;
      position: relative;
    }
    .modal-message li:before {
      content: 'â€¢';
      position: absolute;
      left: 8px;
      color: var(--gold);
      font-weight: bold;
    }
    .modal-buttons {
      display: flex;
      gap: 8px;
      justify-content: center;
    }
    .modal-btn {
      padding: 10px 20px;
      border-radius: 8px;
      border: none;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: 'Inter', sans-serif;
    }
    .modal-btn.primary {
      background: linear-gradient(135deg, var(--green), var(--green-dark));
      color: white;
    }
    .modal-btn.primary:hover {
      transform: translateY(-2px);
    }
    .modal-btn.secondary {
      background: #f0f0f0;
      color: #555;
    }
    .modal-btn.secondary:hover {
      background: #e0e0e0;
    }
    .modal-btn.danger {
      background: linear-gradient(135deg, #dc3545, #c82333);
      color: white;
    }
    .modal-btn.danger:hover {
      background: linear-gradient(135deg, #c82333, #a71e2a);
      transform: translateY(-2px);
    }
    .modal-btn.soft-primary {
      background: linear-gradient(135deg, #6c757d, #5a6268);
      color: white;
    }
    .modal-btn.soft-primary:hover {
      background: linear-gradient(135deg, #5a6268, #495057);
      transform: translateY(-2px);
    }
    .modal-icon.warning {
      background: linear-gradient(135deg, #ff9800, #f57c00);
    }
    .modal-icon.info {
      background: linear-gradient(135deg, #17a2b8, #138496);
    }

    /* IMAGE ZOOM OVERLAY */
    .zoom-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(8px);
      z-index: 10000;
      animation: fadeIn 0.3s ease;
      cursor: pointer;
    }
    .zoom-overlay.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .zoom-container {
      position: relative;
      max-width: 90vw;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .zoom-close {
      position: absolute;
      top: -60px;
      right: 0;
      background: none;
      border: none;
      color: white;
      font-size: 40px;
      cursor: pointer;
      z-index: 10001;
      transition: all 0.2s ease;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }
    .zoom-close:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: scale(1.1);
    }
    #zoomedImage {
      max-width: 100%;
      max-height: 80vh;
      object-fit: contain;
      border-radius: 12px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      animation: slideIn 0.3s ease;
    }
    .zoom-caption {
      color: white;
      font-size: 18px;
      font-weight: 600;
      margin-top: 20px;
      text-align: center;
      font-family: 'Playfair Display', serif;
    }
    .pic-wrap {
      cursor: zoom-in;
      transition: transform 0.2s ease;
    }
    .pic-wrap:hover {
      transform: scale(1.05);
    }
    
    /* Loading state for buttons */
    .btn.loading, .add-to-order.loading {
      position: relative;
      pointer-events: none;
      opacity: 0.7;
    }
    .btn.loading::after, .add-to-order.loading::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      top: 50%;
      left: 50%;
      margin-left: -8px;
      margin-top: -8px;
      border: 2px solid transparent;
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideIn {
      from { 
        transform: translateY(-30px);
        opacity: 0;
      }
      to { 
        transform: translateY(0);
        opacity: 1;
      }
    }

    /* ACCESSIBILITY: REDUCED MOTION */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }

    /* MOBILE RESPONSIVE */
    @media (max-width: 768px) {
      body {
        overflow-x: hidden;
      }
      
      .container { 
        width: 100%; 
        max-width: 100%;
        padding-left: 16px;
        padding-right: 16px;
        margin: 0 auto;
      }
      /* Mobile Cart: permanently hidden floating FAB; sticky nav replaces it */
      .cart-tab { display: none !important; }
      
      /* Sticky Navigation Mobile */
      .sticky-nav .nav-content {
        padding: 8px 16px;
        max-width: 100%;
        gap: 8px;
      }
      .sticky-nav .nav-brand {
        font-size: 15px;
      }
      .sticky-nav .nav-brand img {
        width: 28px;
        height: 28px;
      }
      .sticky-nav .nav-btn {
        padding: 6px 12px;
        font-size: 12px;
        gap: 4px;
      }
      .sticky-nav .nav-btn span:nth-child(2) {
        display: none; /* Hide "View Cart" text on mobile */
      }
      .nav-cart-count {
        min-width: 18px;
        height: 18px;
        font-size: 10px;
      }
      
      /* Trust badges mobile */
      .trust-badges {
        gap: 8px;
        margin-top: 12px;
        flex-wrap: wrap;
      }
      .trust-badge {
        padding: 6px 10px;
        font-size: 10px;
      }
      .trust-badge-icon {
        font-size: 14px;
      }
      
      .trust-badge:first-child .trust-badge-icon {
        font-size: 12px;
      }
      
      /* Hero and tabs mobile */
      header.hero {
        padding: 16px 0 0;
      }
      .brand {
        gap: 16px;
        padding: 0 16px 16px;
      }
      .brand img {
        width: 60px;
        height: 60px;
      }
      .name {
        font-size: clamp(22px, 5vw, 28px);
      }
      .tagline {
        font-size: clamp(12px, 2.5vw, 14px);
      }
      .hero-nav {
        gap: 6px;
        padding: 0 12px 16px;
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
        position: relative;
      }
      .hero-nav::-webkit-scrollbar {
        display: none;
      }
      /* Fade indicator on right to show more content */
      .hero-tabs-wrapper::after {
        content: '';
        position: absolute;
        right: 0;
        top: 0;
        bottom: 2px;
        width: 40px;
        background: linear-gradient(to right, transparent, rgba(14,40,31,0.85));
        pointer-events: none;
        z-index: 10;
      }
      .hero-nav-tab {
        padding: 9px 18px;
        font-size: 12px;
        white-space: nowrap;
        flex-shrink: 0;
        scroll-snap-align: start;
        min-width: fit-content;
      }
      
      /* Removed duplicate mobile cart styles â€“ unified in cart.css */
      /* Preserve spacing adjustments for mobile components only */
      #scrollTop { right: 84px; }
      #whatsappBtn { right: 152px; }
      .cart-header { padding: 16px 20px; }
      .cart-header h3 { font-size: 18px; }
      .cart-content { padding: 16px 20px; }
      .cart-item { padding: 12px; flex-direction: column; align-items: stretch; }
      .cart-item-controls { flex-direction: row; justify-content: space-between; align-items: center; }
      .cart-footer { padding: 16px 20px; }
      .cart-actions { flex-direction: column; }
      .cart-clear-btn, .cart-proceed-btn { flex: 1; }
      
      .cart-item-name {
        font-size: 12px;
      }
      
      .cart-stepper button {
        width: 22px;
        height: 22px;
        font-size: 12px;
      }
      
      .cart-stepper input {
        width: 28px;
        height: 22px;
        font-size: 11px;
      }
      
      .cart-delete-btn {
        width: 22px;
        height: 22px;
        font-size: 12px;
      }
      
      /* Hero section - Reduced height for mobile to show products */
      header.hero { padding: 30px 0 40px; }
      .brand { flex-direction: column; gap: 20px; text-align: center; }
      .brand img { 
        width: 100px; 
        height: 100px;
        margin: 0 auto;
      }
      .name { 
        font-size: 36px; 
        line-height: 1.1; 
        margin: 0;
      }
      .tagline { 
        font-size: 15px; 
        margin: 8px 0 0;
      }
      .hero-cta { 
        justify-content: center; 
        gap: 12px; 
        margin-top: 20px;
      }
      .btn { 
        padding: 12px 24px; 
        font-size: 14px;
        width: 100%;
        max-width: 280px;
      }
      
      /* Sections - Better spacing for mobile */
      section { padding: 40px 0; }
      section#oils {
        padding-top: 30px;
      }
      h2.section-title { 
        font-size: 32px; 
        margin-top: 0; 
        margin-bottom: 10px;
      }
      h2.section-title::after {
        width: 60px;
        height: 3px;
        bottom: -6px;
      }
      p.lead { 
        font-size: 16px; 
        margin-bottom: 32px;
      }
      
      /* Benefits section mobile */
      #benefits {
        padding: 40px 0 !important;
        overflow-x: hidden;
      }
      #benefits .container {
        padding-left: 16px;
        padding-right: 16px;
      }
      #benefits > div > div {
        gap: 20px !important;
      }
      #benefits .benefit-card {
        padding: 20px !important;
      }
      #benefits .benefit-card h3 {
        font-size: 18px !important;
      }
      #benefits .benefit-card p {
        font-size: 14px !important;
      }
      #benefits .benefit-card > div:first-child {
        width: 52px !important;
        height: 52px !important;
        font-size: 26px !important;
        margin-bottom: 12px !important;
      }
      
      /* Product grid -> mobile carousel (horizontal scroll snap) */
      .grid {
        display: flex;
        gap: 16px;
        overflow-x: auto;
        overflow-y: visible;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        padding: 20px 16px 32px 16px;
        align-items: center;
        margin-left: -16px;
        margin-right: -16px;
        width: calc(100% + 32px);
        max-width: 100vw;
      }

      /* Hide native scrollbar for a cleaner carousel look */
      .grid::-webkit-scrollbar { display: none; }
      .grid { -ms-overflow-style: none; scrollbar-width: none; }

      /* Each card becomes a horizontally scrollable 'slide' */
      .grid .card {
        flex: 0 0 calc(100% - 80px);
        max-width: 340px;
        min-width: 260px;
        scroll-snap-align: center;
        border-radius: 20px;
      }

      /* Disable hover transform on mobile to avoid layout shifts while scrolling */
      .grid .card:hover { transform: none; }
      
      /* Disable the gradient border overlay on mobile (prevents double-border effect) */
      .grid .card:hover::before,
      .grid .card::before {
        opacity: 0 !important;
      }

      /* Active slide styling */
      .grid .card {
        transition: transform .28s cubic-bezier(.2,.9,.2,1), box-shadow .28s cubic-bezier(.2,.9,.2,1);
        will-change: transform;
      }

      .grid .card.active-slide {
        transform: translateY(-6px);
        border-color: var(--green);
        box-shadow: 0 20px 48px rgba(30,77,50,0.18);
        z-index: 4;
      }

      /* Scale the product image inside the active card */
      .pic-wrap img {
        transition: transform .36s cubic-bezier(.2,.9,.2,1);
        will-change: transform;
        transform-origin: 50% 50%;
      }

      .grid .card.active-slide .pic-wrap img {
        transform: scale(1.08);
      }
      
      /* Product image area */
      .pic-wrap {
        height: 220px;
        padding: 16px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #ffffff;
      }
      .pic-wrap img {
        display: block;
        width: auto;
        height: 90%;
        max-width: 120%;
        object-fit: contain;
        object-position: 50% 50%;
        transform-origin: 50% 50%;
      }
      
      /* Product content */
      .content { padding: 20px; }
      .pill {
        font-size: 12px;
        padding: 6px 14px;
      }
      .title { 
        font-size: 20px; 
        min-height: 52px;
        margin: 12px 0 10px;
      }
      .price { 
        font-size: 26px;
        margin-bottom: 10px;
      }
      .price span {
        font-size: 14px;
      }
      
      /* Size selector mobile */
      .size-selector {
        margin: 14px 0;
      }
      .size-selector label {
        font-size: 11px;
        margin-bottom: 8px;
      }
      .size-options {
        gap: 6px;
      }
      .size-option {
        padding: 8px 10px;
        font-size: 12px;
        border-radius: 8px;
      }
      
      /* Quantity selector mobile */
      .quantity-selector {
        margin: 14px 0;
      }
      .quantity-selector label {
        font-size: 11px;
        margin-bottom: 8px;
      }
      .quantity-stepper {
        padding: 5px;
        gap: 8px;
      }
      .quantity-stepper button {
        width: 32px;
        height: 32px;
        font-size: 18px;
      }
      .quantity-stepper input {
        height: 32px;
        font-size: 15px;
      }
      
      /* Add to order button */
      .add-to-order {
        margin-top: 14px;
        padding: 12px;
        font-size: 14px;
        border-radius: 10px;
      }
      
      /* Form */
      form.card { padding: 28px 20px; }
      form input, form select, form textarea { 
        padding: 14px 16px; 
        font-size: 15px; 
        border-radius: 10px; 
        border-width: 2px;
      }
      form label {
        font-size: 13px;
      }
      .form-row { 
        flex-direction: column; 
        gap: 0; 
        grid-template-columns: 1fr !important;
      }
      .form-buttons { 
        flex-direction: column; 
        gap: 12px;
        margin-top: 24px;
      }
      .form-buttons .btn { 
        width: 100%;
        max-width: none;
      }
      
      /* Manual selection mobile */
      #manualSelection div[style*="grid-template-columns"] {
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }
      #manualSelection .manual-oil-select,
      #manualSelection .manual-qty {
        font-size: 15px !important;
        padding: 12px !important;
      }
      #manualSelection button[onclick*="removeManualOil"] {
        padding: 10px 16px !important;
        font-size: 14px !important;
        width: 100%;
        margin-top: 8px;
      }
      #manualSelection button[onclick="addManualOil()"] {
        font-size: 14px !important;
        padding: 10px 20px !important;
      }
      
      /* Toast & Scroll button */
      .toast { 
        padding: 14px 24px; 
        font-size: 14px; 
        border-radius: 12px;
        top: 10px;
        max-width: calc(100vw - 40px);
      }
      .toast.show { 
        top: 15px;
      }
      #scrollTop { 
        width: 48px; 
        height: 48px; 
        font-size: 20px; 
        bottom: 24px; 
        right: 20px;
      }
      #whatsappBtn { 
        width: 56px; 
        height: 56px; 
        bottom: 24px; 
        left: 20px;
      }
      
      /* Footer */
      footer { 
        padding: 40px 0 30px;
      }
      footer .tag { 
        font-size: 17px;
      }
      footer .mini { 
        font-size: 13px;
      }
    }

    @media (max-width: 480px) {
      .container { 
        padding-left: 12px;
        padding-right: 12px;
        max-width: 100%;
      }
      
      .sticky-nav .nav-content {
        padding-left: 12px;
        padding-right: 12px;
      }
      
      /* Removed legacy ultra-compact cart overrides to use shared cart.css */
      .brand img { 
        width: 90px; 
        height: 90px;
      }
      .name { 
        font-size: 30px;
      }
      .tagline { 
        font-size: 14px;
      }
      h2.section-title { 
        font-size: 28px; 
        margin-bottom: 8px;
      }
      h2.section-title::after {
        width: 50px;
      }
      p.lead {
        font-size: 15px;
        margin-bottom: 28px;
      }
      .btn { 
        padding: 10px 20px; 
        font-size: 13px;
      }
      
      /* Compact product cards */
      .grid {
        padding: 20px 12px 32px 12px;
        margin-left: -12px;
        margin-right: -12px;
        width: calc(100% + 24px);
      }
      .grid .card {
        flex: 0 0 calc(100% - 60px);
        min-width: 240px;
        max-width: 300px;
      }
      
      #benefits .container {
        padding-left: 12px;
        padding-right: 12px;
      }
      .pic-wrap {
        height: 200px;
        padding: 14px;
      }
      .pic-wrap img { 
        height: 88%;
      }
      .content {
        padding: 16px;
      }
      .title { 
        font-size: 18px;
        min-height: 48px;
      }
      .price { 
        font-size: 24px;
      }
      .quantity-stepper button { 
        width: 30px; 
        height: 30px; 
        font-size: 16px;
      }
      .quantity-stepper input { 
        height: 30px; 
        font-size: 14px;
      }
      
      /* Compact benefits */
      #benefits .benefit-card > div:first-child {
        width: 48px !important;
        height: 48px !important;
        font-size: 24px !important;
      }
      #benefits .benefit-card h3 {
        font-size: 17px !important;
      }
      #benefits .benefit-card p {
        font-size: 13px !important;
      }
      
      /* Form mobile improvements */
      form.card { padding: 20px 16px; }
      form input, form select, form textarea { 
        padding: 12px 14px; 
        font-size: 14px; 
        border-radius: 8px; 
      }
      
      /* Manual selection improvements */
      #manualSelection div[style*="grid-template-columns"] {
        display: block !important;
        margin-bottom: 12px !important;
      }
      #manualSelection div[style*="grid-template-columns"] > div {
        margin-bottom: 10px;
      }
      #manualSelection .manual-oil-select,
      #manualSelection .manual-qty {
        font-size: 14px !important;
        padding: 10px !important;
        width: 100% !important;
      }
      #manualSelection button[onclick*="removeManualOil"] {
        padding: 8px !important;
        font-size: 13px !important;
        width: 100% !important;
      }
      #manualSelection button[onclick="addManualOil()"] {
        font-size: 13px !important;
        padding: 8px 16px !important;
      }
      
      /* Compact scroll buttons */
      #scrollTop {
        width: 44px;
        height: 44px;
        font-size: 18px;
        bottom: 20px;
        right: 16px;
      }
      #whatsappBtn {
        width: 50px;
        height: 50px;
        bottom: 20px;
        left: 16px;
      }
    }
  
/* --- Carousel inactive grayscale effect --- */


.grid .card.active-slide {
  filter: grayscale(0) brightness(1);
  transform: translateY(-6px);
  border-color: var(--green);
  box-shadow: 0 20px 48px rgba(30,77,50,0.18);
  z-index: 4;
}


/* --- Carousel inactive grayscale effect (mobile only) --- */
@media (max-width: 768px) {
  
  .grid .card.active-slide {
    filter: grayscale(0) brightness(1);
    transform: translateY(-6px);
    border-color: var(--green);
    box-shadow: 0 20px 48px rgba(30,77,50,0.18);
    z-index: 4;
  }
}


/* --- Carousel inactive grayscale effect (STRICTLY mobile only) --- */
@media screen and (max-width: 767px) {
  #oils .grid .card {
    filter: grayscale(0.8) brightness(0.85);
    transition:
      transform .28s cubic-bezier(.2,.9,.2,1),
      box-shadow .28s cubic-bezier(.2,.9,.2,1),
      filter .4s ease;
  }
  #oils .grid .card.active-slide {
    filter: grayscale(0) brightness(1);
    transform: translateY(-6px);
    border-color: var(--green);
    box-shadow: 0 20px 48px rgba(30,77,50,0.18);
    z-index: 4;
  }
}


/* --- Mobile FAB placement for Cart (prevents disappearing with collapsing top bars) --- */
@media (max-width: 768px) {
  .cart-tab {
    position: fixed;
    top: auto;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10050;
    padding: 12px 24px;
    border-radius: 50px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.25);
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    will-change: transform;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .cart-tab:active {
    transform: translateX(-50%) scale(0.95);
  }
  /* Adjust other floating buttons */
  #scrollTop {
    bottom: 90px;
    right: 20px;
  }
  #whatsappBtn {
    bottom: 90px;
    left: 20px;
  }
}

</style>
<style id="toast-top-fix">
/* Keep toast visible near the browser top */
.toast.show { top: 20px !important; }
</style><style id="disable-addtocart-modal">#addToCartModal{display:none !important;} .toast.show{top:20px !important;}</style><style id="tab-hover-fix">
/* Prevent hover effect on active tab */
.hero-nav-tab.active:hover {
  color: #fff !important;
  background-color: #184d36 !important;
  cursor: default !important;
}

/* Keep hover effect only for non-active tabs */
.hero-nav-tab:not(.active):hover {
  color: #fff !important;
  background-color: #184d36 !important;
}

/* Keep active underline consistent */
.hero-nav-tab.active::after {
  content: "";
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 60%;
  height: 4px;
  background: linear-gradient(90deg, var(--gold-light), var(--gold));
  border-radius: 4px;
  box-shadow: 0 2px 6px rgba(157, 124, 42, 0.25);
}
</style><style id="toast-top-20">.toast.show{ top:20px !important; }</style><style id="cart-scrollbar-fix">
/* Enable scrolling inside cart popup if content is long */
#cartDropdown {
  max-height: 70vh;
  overflow-y: auto;
  overscroll-behavior: contain;
  scrollbar-width: thin;
}

/* Optional (nice scroll look for WebKit browsers) */
#cartDropdown::-webkit-scrollbar {
  width: 6px;
}
#cartDropdown::-webkit-scrollbar-thumb {
  background-color: rgba(0,0,0,0.3);
  border-radius: 4px;
}
</style><style id="mobile-underline-fix">
/* Fix underline position for active tab in mobile view */
@media (max-width: 768px) {
  .hero-nav-tab.active::after {
    bottom: -6px !important;
  }
}
</style><style id="mobile-underline-strong-fix">
/* Strong mobile fix: make underline render below the banner and not get clipped */
@media (max-width: 768px) {
  .hero-tabs-wrapper {
    padding-bottom: 0 !important;
    overflow: visible !important;   /* avoid clipping */
    border-bottom: none !important; /* prevent masking the line */
  }
  .hero-nav-tab.active {
    position: relative !important;
    z-index: 2 !important;          /* keep above background */
  }
  .hero-nav-tab.active::after {
    bottom: -10px !important;       /* push further down */
    height: 4px !important;
  }
}
</style><style id="mobile-underline-override">
/* Highest-specificity mobile override for active underline */
@media (max-width: 768px) {
  .hero-tabs-wrapper .hero-nav-tab.active::after {
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) !important;
    width: 60% !important;
    bottom: -12px !important; /* push clearly below */
    height: 4px !important;
  }
  .hero-tabs-wrapper {
    padding-bottom: 0 !important;
    border-bottom: none !important;
    overflow: visible !important;
  }
}
</style></head>
<body class="page-our-oils">
<!-- Sticky Navigation -->
<nav class="sticky-nav" id="stickyNav">
<div class="nav-content">
<div class="nav-brand">
<img alt="Arumee" decoding="async" fetchpriority="high" height="40" src="arumee_assets/logo.png" width="40"/>
<span>ARUMEE</span>
</div>
<div class="nav-actions">
<a class="nav-btn" href="#oils" id="navOilsBtn" style="display: none;">Our Oils</a>
<button class="nav-btn primary" id="navCartBtn" onclick="toggleCart()" style="display: none;">
<span>ðŸ›’</span>
<span>View Cart</span>
<span class="nav-cart-count" id="navCartCount">0</span>
</button>
</div>
</div>
</nav>
<header class="hero">
<div class="container">
<div class="brand">
<img alt="Arumee logo" decoding="async" fetchpriority="high" height="80" src="arumee_assets/logo.png" style="aspect-ratio:1/1;" width="80"/>
<div>
<div class="name">ARUMEE<sup style="font-size:0.4em; color:var(--gold); font-weight:800;">â„¢</sup></div>
<div class="tagline">Premium coldâ€‘pressed oils</div>
<div class="trust-badges">
<div class="trust-badge">
<span class="trust-badge-icon">âœ“</span>
<span>FSSAI Certified</span>
</div>
<div class="trust-badge">
<span class="trust-badge-icon">ðŸŒ¿</span>
<span>100% Natural</span>
</div>
<div class="trust-badge">
<span class="trust-badge-icon">ðŸ†</span>
<span>Premium Quality</span>
</div>
</div>
</div>
</div>
</div>
</header>
<!-- Hero Tabs Below Banner -->
<div aria-label="Primary site sections" class="hero-tabs-wrapper" role="tablist">
<nav class="hero-nav">
<a aria-selected="true" class="hero-nav-tab active" href="index_pilot.html" role="tab">Our Oils</a>
<a aria-selected="false" class="hero-nav-tab" href="benefits.html" role="tab">Benefits</a>
<a aria-selected="false" class="hero-nav-tab" href="about.html" role="tab">About Us</a>
<a aria-selected="false" class="hero-nav-tab" href="contact.html" role="tab">Contact Us</a>
</nav>
</div>
<!-- Floating Cart Tab -->
<div aria-expanded="false" aria-label="Shopping cart" class="cart-tab" id="cartTab" onclick="toggleCart()" role="button">
<span aria-hidden="true" class="cart-icon">ðŸ›’</span>
<span aria-live="polite" class="cart-count" id="cartCount">0</span>
</div>
<script>
    // Initialize cart count immediately from localStorage to prevent flash of 0
    (function() {
      try {
        const saved = localStorage.getItem('arumeeCart');
        if (saved) {
          const items = JSON.parse(saved);
          if (Array.isArray(items) && items.length > 0) {
            document.getElementById('cartCount').textContent = items.length;
            document.body.classList.add('has-cart-items');
          }
        }
      } catch(e) {}
    })();
  </script>
<!-- Removed Why Arumee section per request; tabs now route to dedicated pages. -->
<!-- Cart Slide-in Panel -->
<div aria-labelledby="cartHeader" aria-modal="true" class="cart-dropdown" id="cartDropdown" role="dialog" tabindex="-1">
<div class="cart-header">
<h3 id="cartHeader"><span>ðŸ›’</span> Your Cart</h3>
<button aria-label="Close cart" class="cart-close" onclick="toggleCart()">Ã—</button>
</div>
<div class="cart-content" id="cartContent">
<p class="empty-cart">Your cart is empty</p>
</div>
<div class="cart-footer" id="cartFooter" style="display: none;">
<div class="cart-total-section">
<span class="cart-total-label">Total Amount</span>
<span class="cart-total-amount" id="cartTotal">â‚¹0</span>
</div>
<div class="cart-actions">
<button class="cart-clear-btn" onclick="clearOrder()">
<span>ðŸ—‘ï¸</span>
<span>Clear All</span>
</button>
<button class="cart-proceed-btn" onclick="proceedToOrder()">
<span>Proceed to Order</span>
<span>â†’</span>
</button>
</div>
</div>
</div>
<div class="cart-backdrop" id="cartBackdrop" onclick="toggleCart()"></div>
<a class="skip-link" href="#mainContent">Skip to main content</a>
<main id="mainContent" role="main">
<section id="oils">
<div class="container">
<h2 class="section-title">Our Signature Oils</h2>
<p class="lead">Pure, natural, and traditionally pressed.</p>
<div class="grid">
<article aria-labelledby="prod-coconut-title" class="card">
<div class="pic-wrap"><img alt="Coldâ€‘Pressed Coconut Oil bottle" decoding="async" height="240" loading="lazy" src="arumee_assets/mockup_coconut.png" width="240"/></div>
<div class="content">
<span class="pill" id="coconut-pill">Coconut â€¢ 500ml</span>
<div class="title" id="prod-coconut-title">Coldâ€‘Pressed Coconut Oil</div>
<div class="price" id="coconut-price">â‚¹200 <span>/ 500ml</span></div>
<div class="size-selector">
<label>SIZE</label>
<div class="size-options">
<div class="size-option active" data-price="200" data-product="coconut" data-size="500ml">500ml</div>
<div class="size-option" data-price="400" data-product="coconut" data-size="1L">1L</div>
<div class="size-option" data-price="2000" data-product="coconut" data-size="5L">5L</div>
</div>
</div>
<div class="quantity-selector">
<label for="qty-coconut">Quantity</label>
<div class="quantity-stepper">
<button aria-label="Decrease coconut quantity" class="qty-btn" data-action="dec" data-product="coconut" type="button">âˆ’</button>
<input aria-label="Coconut quantity" id="qty-coconut" inputmode="numeric" max="10" min="1" pattern="[0-9]*" type="number" value="1"/>
<button aria-label="Increase coconut quantity" class="qty-btn" data-action="inc" data-product="coconut" type="button">+</button>
</div>
</div>
<button class="add-to-order" data-name="Cold-Pressed Coconut Oil" data-product="coconut">Add to Order</button>
</div>
</article>
<article aria-labelledby="prod-groundnut-title" class="card">
<div class="pic-wrap"><img alt="Coldâ€‘Pressed Groundnut Oil bottle" decoding="async" height="240" loading="lazy" src="arumee_assets/mockup_groundnut.png" width="240"/></div>
<div class="content">
<span class="pill" id="groundnut-pill">Groundnut â€¢ 500ml</span>
<div class="title" id="prod-groundnut-title">Wooden Coldâ€‘Pressed Groundnut Oil</div>
<div class="price" id="groundnut-price">â‚¹115 <span>/ 500ml</span></div>
<div class="size-selector">
<label>SIZE</label>
<div class="size-options">
<div class="size-option active" data-price="115" data-product="groundnut" data-size="500ml">500ml</div>
<div class="size-option" data-price="230" data-product="groundnut" data-size="1L">1L</div>
<div class="size-option" data-price="1150" data-product="groundnut" data-size="5L">5L</div>
</div>
</div>
<div class="quantity-selector">
<label for="qty-groundnut">Quantity</label>
<div class="quantity-stepper">
<button aria-label="Decrease groundnut quantity" class="qty-btn" data-action="dec" data-product="groundnut" type="button">âˆ’</button>
<input aria-label="Groundnut quantity" id="qty-groundnut" inputmode="numeric" max="10" min="1" pattern="[0-9]*" type="number" value="1"/>
<button aria-label="Increase groundnut quantity" class="qty-btn" data-action="inc" data-product="groundnut" type="button">+</button>
</div>
</div>
<button class="add-to-order" data-name="Wooden Cold-Pressed Groundnut Oil" data-product="groundnut">Add to Order</button>
</div>
</article>
<article aria-labelledby="prod-gingelly-title" class="card">
<div class="pic-wrap"><img alt="Coldâ€‘Pressed Gingelly (Sesame) Oil bottle" decoding="async" height="240" loading="lazy" src="arumee_assets/mockup_gingelly.png" width="240"/></div>
<div class="content">
<span class="pill" id="gingelly-pill">Gingelly â€¢ 500ml</span>
<div class="title" id="prod-gingelly-title">Wooden Coldâ€‘Pressed Gingelly Oil</div>
<div class="price" id="gingelly-price">â‚¹200 <span>/ 500ml</span></div>
<div class="size-selector">
<label>SIZE</label>
<div class="size-options">
<div class="size-option active" data-price="200" data-product="gingelly" data-size="500ml">500ml</div>
<div class="size-option" data-price="400" data-product="gingelly" data-size="1L">1L</div>
<div class="size-option" data-price="2000" data-product="gingelly" data-size="5L">5L</div>
</div>
</div>
<div class="quantity-selector">
<label for="qty-gingelly">Quantity</label>
<div class="quantity-stepper">
<button aria-label="Decrease gingelly quantity" class="qty-btn" data-action="dec" data-product="gingelly" type="button">âˆ’</button>
<input aria-label="Gingelly quantity" id="qty-gingelly" inputmode="numeric" max="10" min="1" pattern="[0-9]*" type="number" value="1"/>
<button aria-label="Increase gingelly quantity" class="qty-btn" data-action="inc" data-product="gingelly" type="button">+</button>
</div>
</div>
<button class="add-to-order" data-name="Wooden Cold-Pressed Gingelly Oil" data-product="gingelly">Add to Order</button>
</div>
</article>
</div>
</div>
</section>
<section id="benefits" style="background: white; padding: 60px 0; border-top: 1px solid rgba(30, 77, 50, 0.1);">
<div class="container">
<h2 class="section-title">Why Choose Arumee?</h2>
<p class="lead">Crafted with tradition, delivered with care</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 32px; margin-top: 40px;">
<div class="benefit-card" style="text-align: center; padding: 24px; border-radius: 16px; transition: all 0.3s ease;">
<div style="width: 64px; height: 64px; margin: 0 auto 16px; background: linear-gradient(135deg, var(--green-dark), var(--green)); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-md);">
<!-- Natural.png icon asset -->
<img alt="100% Pure &amp; Natural" loading="lazy" src="arumee_assets/Natural.png" style="width:44px;height:44px;display:block;object-fit:contain;filter:drop-shadow(0 1px 2px rgba(0,0,0,.25));"/>
</div>
<h3 style="font-family: 'Playfair Display', serif; font-size: 22px; color: var(--green); margin: 0 0 12px;">100% Pure &amp; Natural</h3>
<p style="color: #666; line-height: 1.6; margin: 0;">No chemicals, no preservatives. Just pure, cold-pressed goodness from farm to bottle.</p>
</div>
<div class="benefit-card" style="text-align: center; padding: 24px; border-radius: 16px; transition: all 0.3s ease;">
<div style="width: 64px; height: 64px; margin: 0 auto 16px; background: linear-gradient(135deg, var(--gold), var(--gold-light)); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-md);">
<!-- Traditional method icon (droplet + snowflake) -->
<svg aria-label="Traditional cold-pressed method" fill="none" height="40" role="img" style="display:block;" viewbox="0 0 64 64" width="40" xmlns="http://www.w3.org/2000/svg">
<!-- Outer droplet -->
<path d="M32 6C26 16 20 24 17 31c-2 4-3 8-3 12a18 18 0 0 0 36 0c0-4-1-8-3-12-3-7-9-15-15-25Z" fill="rgba(255,255,255,0.12)" stroke="#ffffff" stroke-linejoin="round" stroke-width="2.6"></path>
<!-- Inner contour -->
<path d="M32 15c-4.5 7-8.1 12.4-10.2 16.7-1.3 2.7-2 5.4-2 8.3a14.2 14.2 0 0 0 28.4 0c0-2.9-.7-5.6-2-8.3C40.1 27.4 36.5 22 32 15Z" stroke="#ffffff" stroke-linejoin="round" stroke-width="2"></path>
<!-- Snowflake center -->
<g stroke="#ffffff" stroke-linecap="round" stroke-width="2">
<line x1="32" x2="32" y1="24" y2="40"></line>
<line x1="24" x2="40" y1="32" y2="32"></line>
<line x1="26.5" x2="37.5" y1="26.5" y2="37.5"></line>
<line x1="37.5" x2="26.5" y1="26.5" y2="37.5"></line>
<!-- Tips -->
<line x1="32" x2="29.5" y1="24" y2="26"></line>
<line x1="32" x2="34.5" y1="24" y2="26"></line>
<line x1="32" x2="29.5" y1="40" y2="38"></line>
<line x1="32" x2="34.5" y1="40" y2="38"></line>
<line x1="24" x2="26" y1="32" y2="29.5"></line>
<line x1="24" x2="26" y1="32" y2="34.5"></line>
<line x1="40" x2="38" y1="32" y2="29.5"></line>
<line x1="40" x2="38" y1="32" y2="34.5"></line>
</g>
</svg>
</div>
<h3 style="font-family: 'Playfair Display', serif; font-size: 22px; color: var(--green); margin: 0 0 12px;">Traditional Methods</h3>
<p style="color: #666; line-height: 1.6; margin: 0;">Wooden cold-pressed technique preserves nutrients and authentic flavor in every drop.</p>
</div>
<div class="benefit-card" style="text-align: center; padding: 24px; border-radius: 16px; transition: all 0.3s ease;">
<div style="width: 64px; height: 64px; margin: 0 auto 16px; background: linear-gradient(135deg, var(--green), var(--green-dark)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; box-shadow: var(--shadow-md);">âœ“</div>
<h3 style="font-family: 'Playfair Display', serif; font-size: 22px; color: var(--green); margin: 0 0 12px;">FSSAI Certified</h3>
<p style="color: #666; line-height: 1.6; margin: 0;">Quality you can trust. Licensed and certified for your peace of mind.</p>
</div>
<div class="benefit-card" style="text-align: center; padding: 24px; border-radius: 16px; transition: all 0.3s ease;">
<div style="width: 64px; height: 64px; margin: 0 auto 16px; background: linear-gradient(135deg, var(--gold), var(--gold-light)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; box-shadow: var(--shadow-md);">ðŸšš</div>
<h3 style="font-family: 'Playfair Display', serif; font-size: 22px; color: var(--green); margin: 0 0 12px;">Fresh Delivery</h3>
<p style="color: #666; line-height: 1.6; margin: 0;">Direct from our mill to your doorstep. Fresh, sealed, and ready to use.</p>
</div>
</div>
</div>
</section>
<section id="order" style="scroll-margin-top:90px;">
<div class="container">
<h2 class="section-title">Place an Order</h2>
<p class="lead">Fill in your details â€” we confirm by WhatsApp / phone before dispatch (cash / UPI on delivery).</p>
<form autocapitalize="none" autocomplete="off" class="card" onsubmit="handleSubmit(event)" spellcheck="false">
<div class="form-row" style="display:grid; grid-template-columns: repeat(2, 1fr); gap:20px;">
<div>
<label for="input-name">Full Name</label><br/>
<input autocomplete="off" id="input-name" maxlength="50" minlength="2" name="name" onclick="this.readOnly=false;this.disabled=false;this.focus();" onfocus="this.readOnly=false;this.disabled=false;" pattern="[A-Za-z\s]+" placeholder="Your name" required="" title="Please enter a valid name (letters and spaces only)" type="text"/>
</div>
<div>
<label for="input-phone">Phone / WhatsApp</label><br/>
<input autocomplete="off" id="input-phone" inputmode="tel" maxlength="15" name="phone" onclick="this.readOnly=false;this.disabled=false;this.focus();" onfocus="this.readOnly=false;this.disabled=false;" pattern="[\+]?[0-9\s\-]{10,15}" placeholder="+91..." required="" title="Please enter a valid phone number (10-15 digits)" type="tel"/>
</div>
<div style="grid-column:1/-1">
<label for="input-address">Address</label><br/>
<input autocomplete="off" id="input-address" maxlength="200" minlength="10" name="address" onclick="this.readOnly=false;this.disabled=false;this.focus();" onfocus="this.readOnly=false;this.disabled=false;" placeholder="Door no, street, area, pincode" required="" title="Please enter a complete address" type="text"/>
</div>
<div style="grid-column:1/-1">
<label for="orderDetails">Order Summary</label><br/>
<textarea id="orderDetails" name="orderDetails" placeholder="Your selected items will appear here..." readonly="" rows="4" style="background:#f5f5f5; resize:none; overflow:hidden; min-height:80px;"></textarea>
</div>
<input id="totalAmount" name="totalAmount" type="hidden" value="0"/>
<div style="grid-column:1/-1">
<label for="input-notes">Additional Notes (optional)</label><br/>
<textarea autocomplete="off" id="input-notes" name="notes" onclick="this.readOnly=false;this.disabled=false;this.focus();" onfocus="this.readOnly=false;this.disabled=false;" placeholder="Any special delivery instructions..." rows="3"></textarea>
</div>
</div>
<div class="form-buttons" style="display:flex;gap:16px;justify-content:flex-end;margin-top:20px;">
<button class="btn outline" onclick="clearOrder()" type="reset">Clear</button>
<button class="btn fill" type="submit">Submit Order</button>
</div>
</form>
</div>
</section>
</main>
<footer>
<div class="container">
<div class="tag">Handcrafted with â¤ï¸ in Namakkal</div>
<div>â„¢ 2025 Arumee â€¢ Mani Flour &amp; Oil Mill</div>
<div class="mini">FSSAI: 22425133000137 â€¢ Phone: 9751425598 / 9443342098</div>
</div>
</footer>
<button aria-label="Scroll to top" id="scrollTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">â†‘</button>
<a aria-label="Chat on WhatsApp" href="https://wa.me/918925295844" id="whatsappBtn" rel="noopener noreferrer" target="_blank" title="Chat on WhatsApp">
<img alt="WhatsApp" src="arumee_assets/whatsapp_icon.png"/>
</a>
<div aria-live="polite" class="toast" id="toast" role="alert"></div>
<!-- Image Zoom Overlay -->
<div class="zoom-overlay" id="imageZoomOverlay">
<div class="zoom-container">
<button class="zoom-close" onclick="closeImageZoom()">Ã—</button>
<img alt="Zoomed Product Image" id="zoomedImage" src=""/>
<div class="zoom-caption"></div>
</div>
</div>
<!-- Add to Cart Confirmation Modal -->
<div class="modal-overlay" id="addToCartModal">
<div class="modal-content">
<div class="modal-icon">ðŸ›’</div>
<h3 class="modal-title">Item Added to Cart</h3>
<div class="modal-message">
<p id="addToCartDetails"></p>
</div>
<div class="modal-buttons">
<button class="modal-btn secondary" onclick="continueShoppingFromModal()">Continue Shopping</button>
<button class="modal-btn primary" onclick="checkoutFromModal()">Proceed to Checkout</button>
</div>
</div>
</div>
<!-- Custom Modal -->
<div class="modal-overlay" id="successModal">
<div class="modal-content">
<div class="modal-icon">âœ“</div>
<h3 class="modal-title">Order Submitted Successfully!</h3>
<div class="modal-message">
<p>We will contact you soon to confirm:</p>
<ul>
<li>Payment details</li>
<li>Delivery schedule</li>
</ul>
<p style="margin-top: 16px;">Click OK to open WhatsApp and send your order directly to us.</p>
</div>
<div class="modal-buttons">
<button class="modal-btn secondary" onclick="closeModal()">Cancel</button>
<button class="modal-btn primary" onclick="openWhatsApp()">OK</button>
</div>
</div>
</div>
<!-- Refresh Warning Modal -->
<div class="modal-overlay" id="refreshWarningModal">
<div class="modal-content">
<div class="modal-icon info">â„¹ï¸</div>
<h3 class="modal-title">Just checking before you refresh</h3>
<div class="modal-message">
<p>You have <span id="cartItemCount">0</span> item(s) in your cart.</p>
<p>Refreshing will clear your current selection and you'll need to add items again.</p>
<p>Would you like to continue?</p>
</div>
<div class="modal-buttons">
<button class="modal-btn secondary" onclick="cancelRefresh()">Stay Here</button>
<button class="modal-btn soft-primary" onclick="confirmRefresh()">Refresh Page</button>
</div>
</div>
</div>
<script>
    // LocalStorage functions for cart persistence
    function saveCartToStorage() {
      localStorage.setItem('arumeeCart', JSON.stringify(orderItems));
    }
    
    function loadCartFromStorage() {
      // Check if this was an intentional refresh
      if (sessionStorage.getItem('intentionalRefresh') === 'true') {
        sessionStorage.removeItem('intentionalRefresh');
  // intentional refresh: skip loading persisted cart
        return;
      }
      
      const savedCart = localStorage.getItem('arumeeCart');
      if (savedCart) {
        try {
          orderItems = JSON.parse(savedCart);
          updateOrderDetails();
        } catch (e) {
          // failed to parse stored cart
          orderItems = [];
        }
      }
    }
    
    // Removed form data persistence to ensure fresh empty form on each page load.
    function clearFormFields() {
      const nameField = document.querySelector('input[name="name"]');
      const phoneField = document.querySelector('input[name="phone"]');
      const addressField = document.querySelector('input[name="address"]');
      const notesField = document.querySelector('textarea[name="notes"]');
      [nameField, phoneField, addressField, notesField].forEach(f => { if (f) f.value = ''; });
    }
    
    let pendingWhatsAppUrl = '';

    function showSuccessModal(whatsappUrl) {
      pendingWhatsAppUrl = whatsappUrl;
      document.getElementById('successModal').classList.add('show');
    }

    function closeModal() {
      document.getElementById('successModal').classList.remove('show');
      pendingWhatsAppUrl = '';
      // Also navigate to top of the page when user cancels from the success modal
      try { window.scrollTo({ top: 0, behavior: 'smooth' }); } catch(e) { window.scrollTo(0,0); }
    }

    function openWhatsApp() {
      if (pendingWhatsAppUrl) {
        window.open(pendingWhatsAppUrl, '_blank');
      }
      closeModal();
    }

    // Image Zoom Functions
    function showImageZoom(imageSrc, caption) {
      const overlay = document.getElementById('imageZoomOverlay');
      const zoomedImage = document.getElementById('zoomedImage');
      const zoomCaption = document.querySelector('.zoom-caption');
      
      zoomedImage.src = imageSrc;
      zoomCaption.textContent = caption;
      overlay.classList.add('show');
      
      // Prevent body scroll when zoom is open
      document.body.style.overflow = 'hidden';
    }
    
    function closeImageZoom() {
      const overlay = document.getElementById('imageZoomOverlay');
      overlay.classList.remove('show');
      document.body.style.overflow = '';
    }

    // Refresh Warning Modal Functions
    let pendingRefresh = false;
    
    function showRefreshWarning() {
      document.getElementById('cartItemCount').textContent = orderItems.length;
      document.getElementById('refreshWarningModal').classList.add('show');
    }
    
    function cancelRefresh() {
      document.getElementById('refreshWarningModal').classList.remove('show');
      pendingRefresh = false;
    }
    
    function confirmRefresh() {
      document.getElementById('refreshWarningModal').classList.remove('show');
      pendingRefresh = true;
      // Mark that user intentionally refreshed
      sessionStorage.setItem('intentionalRefresh', 'true');
      // Clear localStorage before refresh
      localStorage.removeItem('arumeeCart');
      localStorage.removeItem('arumeeFormData');
      location.reload();
    }

    // Show order guidance when clicking "Order Without Payment"
    function showOrderGuidance(event) {
      setTimeout(() => {
        showToast('ðŸ‘† Choose your oils and quantities, then scroll down to submit order');
      }, 100);
    }
    
    // Quantity stepper functions
    function increaseQty(id, event) {
      if (event) {
        event.stopPropagation();
        event.preventDefault();
      }
  // increase quantity interaction
      const input = document.getElementById('qty-' + id);
      if (!input) {
        console.error('Input not found for qty-' + id);
        return;
      }
      const currentVal = parseInt(input.value);
      const maxVal = parseInt(input.max);
  // enforce max
      if (currentVal < maxVal) {
        input.value = currentVal + 1;
  // updated quantity
      }
    }
    function decreaseQty(id, event) {
      if (event) {
        event.stopPropagation();
        event.preventDefault();
      }
  // decrease quantity interaction
      const input = document.getElementById('qty-' + id);
      if (!input) {
        console.error('Input not found for qty-' + id);
        return;
      }
      const currentVal = parseInt(input.value);
      const minVal = parseInt(input.min);
  // enforce min
      if (currentVal > minVal) {
        input.value = currentVal - 1;
  // updated quantity
      }
    }
    function validateQty(id) {
      const input = document.getElementById('qty-' + id);
      let val = parseInt(input.value);
      const min = parseInt(input.min);
      const max = parseInt(input.max);
      
      // Remove any non-numeric characters
      if (isNaN(val) || val < min) {
        input.value = min;
      } else if (val > max) {
        input.value = max;
      }
    }

  // Add to order functionality
  let orderItems = [];
  let manualSelectionCounter = 0;
  let isCartOpen = false;
  let preventCartClose = false;
  // Guard timestamp to prevent double toggle (touchend + click on mobile)
  let lastCartToggleTime = 0;
  // Flag to track if this is the initial page load (don't animate cart count on first render)
  let isInitialLoad = true;

    // Cart Functions
  window.toggleCart = function toggleCart(event) {
      // Prevent double firing on mobile (touchend then click)
      const now = Date.now();
      if (now - lastCartToggleTime < 300) {
        return; // ignore rapid second invocation
      }
      lastCartToggleTime = now;

      if (event) {
        event.preventDefault();
        event.stopPropagation();
      }

      const cartDropdown = document.getElementById('cartDropdown');
      const backdrop = document.getElementById('cartBackdrop');
      const cartTab = document.getElementById('cartTab');

      isCartOpen = !isCartOpen;

      // Update ARIA attribute
      if (cartTab) {
        cartTab.setAttribute('aria-expanded', isCartOpen);
      }

      if (isCartOpen) {
        if (cartDropdown) cartDropdown.classList.add('open');
        if (backdrop) backdrop.classList.add('visible');
        if (window.matchMedia('(max-width:768px)').matches) { document.body.classList.add('cart-open'); }
        // Focus management for accessibility: focus first focusable element inside cart
        if (cartDropdown) {
          const focusableSelectors = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
          const focusables = cartDropdown.querySelectorAll(focusableSelectors);
          if (focusables.length) {
            setTimeout(() => { focusables[0].focus(); }, 30);
          }
        }
      } else {
        if (cartDropdown) cartDropdown.classList.remove('open');
        if (backdrop) backdrop.classList.remove('visible');
        if (window.matchMedia('(max-width:768px)').matches) { document.body.classList.remove('cart-open'); }
      }
    }

    // Global keydown listener for cart focus trap & ESC close
    document.addEventListener('keydown', function(e) {
      if (!isCartOpen) return;
      const cartDropdown = document.getElementById('cartDropdown');
      if (!cartDropdown) return;

      // ESC closes cart
      if (e.key === 'Escape') {
        toggleCart();
        return;
      }

      if (e.key === 'Tab') {
        const focusableSelectors = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
        const focusables = Array.from(cartDropdown.querySelectorAll(focusableSelectors)).filter(el => !el.disabled && el.offsetParent !== null);
        if (focusables.length === 0) return;
        const first = focusables[0];
        const last = focusables[focusables.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === first) {
            e.preventDefault();
            last.focus();
          }
        } else {
          if (document.activeElement === last) {
            e.preventDefault();
            first.focus();
          }
        }
      }
    });

    function updateCartDisplay() {
      const cartCount = document.getElementById('cartCount');
      const cartContent = document.getElementById('cartContent');
      const cartFooter = document.getElementById('cartFooter');
      const cartTotal = document.getElementById('cartTotal');
      
      // Update cart count with animation
      const newCount = orderItems.length;
      const oldCount = parseInt(cartCount.textContent) || 0;
      
      cartCount.textContent = newCount;
  // Toggle body.has-cart-items for conditional mobile cart icon visibility
  document.body.classList.toggle('has-cart-items', newCount > 0);
      
      // Trigger bounce animation when count increases (but skip on initial page load)
      if (!isInitialLoad && newCount > oldCount) {
        cartCount.style.animation = 'none';
        setTimeout(() => {
          cartCount.style.animation = 'bounce 0.5s ease';
        }, 10);
      }
      
      if (orderItems.length === 0) {
        cartContent.innerHTML = '<p class="empty-cart">Your cart is empty</p>';
        cartFooter.style.display = 'none';
      } else {
        let cartHTML = '';
        let grandTotal = 0;
        
        orderItems.forEach((item, index) => {
          cartHTML += `
            <div class="cart-item">
              <div class="cart-item-info">
                <div class="cart-item-name">${item.productName}</div>
                <div class="cart-item-details">
                  <span>â‚¹${item.price} Ã— ${item.qty}</span>
                </div>
                <div class="cart-item-price">â‚¹${item.total}</div>
              </div>
              <div class="cart-item-controls">
                <div class="cart-stepper">
                  <button onclick="updateCartItemQty(${index}, -1)" aria-label="Decrease quantity">âˆ’</button>
                  <input type="number" value="${item.qty}" min="1" max="10" readonly>
                  <button onclick="updateCartItemQty(${index}, 1)" aria-label="Increase quantity">+</button>
                </div>
                <button class="cart-item-remove" onclick="removeCartItem(${index})" title="Remove">Remove</button>
              </div>
            </div>
          `;
          grandTotal += item.total;
        });
        
        cartContent.innerHTML = cartHTML;
        cartTotal.textContent = `â‚¹${grandTotal}`;
        cartFooter.style.display = 'flex';
      }
    }

    function proceedToOrder() {
      if (orderItems.length === 0) {
        showToast('Your cart is empty!');
        return;
      }
      
      // Close cart
      toggleCart();
      
      // Scroll to order form
      const orderSection = document.getElementById('order');
      if (orderSection) {
        setTimeout(() => {
          orderSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          
          // Focus on first input field after scroll
          setTimeout(() => {
            const nameInput = document.querySelector('input[name="name"]');
            if (nameInput) {
              nameInput.focus();
            }
          }, 600);
        }, 300);
      }
    }

    function scrollToOrder() {
      proceedToOrder();
    }

    // Cart item management functions
    function updateCartItemQty(index, change) {
      if (index >= 0 && index < orderItems.length) {
        const item = orderItems[index];
        const newQty = Math.max(0, Math.min(10, item.qty + change));
        
        // If quantity becomes 0, remove the item
        if (newQty === 0) {
          removeCartItem(index);
          return;
        }
        
        if (newQty !== item.qty) {
          // Prevent cart from closing when updating quantity
          preventCartClose = true;
          setTimeout(() => {
            preventCartClose = false;
          }, 500);
          
          item.qty = newQty;
          item.total = item.price * newQty;
          updateOrderDetails();
          // No toast needed - changes are visible in cart immediately
        }
      }
    }

    function setCartItemQty(index, newQty) {
      const qty = Math.max(1, Math.min(10, parseInt(newQty) || 1));
      
      if (index >= 0 && index < orderItems.length) {
        const item = orderItems[index];
        
        if (item.qty !== qty) {
          // Prevent cart from closing when updating quantity
          preventCartClose = true;
          setTimeout(() => {
            preventCartClose = false;
          }, 500);
        }
        
        item.qty = qty;
        item.total = item.price * qty;
        updateOrderDetails();
        // No toast needed - changes are visible in cart immediately
      }
    }

    function removeCartItem(index) {
      if (index >= 0 && index < orderItems.length) {
        const item = orderItems[index];
        const itemName = item.originalName || item.productName;
        
        // Prevent cart from closing when removing items
        preventCartClose = true;
        setTimeout(() => {
          preventCartClose = false;
        }, 500);
        
        orderItems.splice(index, 1);
        updateOrderDetails();
        toggleManualSelection(); // Show manual selection if cart becomes empty
        showToast(`Removed: ${itemName}`);
      }
    }
    
    const oilOptions = [
      { id: 'coconut-500ml', name: 'Cold-Pressed Coconut Oil (500ml)', price: 200 },
      { id: 'coconut-1L', name: 'Cold-Pressed Coconut Oil (1L)', price: 400 },
      { id: 'coconut-5L', name: 'Cold-Pressed Coconut Oil (5L)', price: 2000 },
      { id: 'groundnut-500ml', name: 'Wooden Cold-Pressed Groundnut Oil (500ml)', price: 115 },
      { id: 'groundnut-1L', name: 'Wooden Cold-Pressed Groundnut Oil (1L)', price: 230 },
      { id: 'groundnut-5L', name: 'Wooden Cold-Pressed Groundnut Oil (5L)', price: 1150 },
      { id: 'gingelly-500ml', name: 'Wooden Cold-Pressed Gingelly Oil (500ml)', price: 200 },
      { id: 'gingelly-1L', name: 'Wooden Cold-Pressed Gingelly Oil (1L)', price: 400 },
      { id: 'gingelly-5L', name: 'Wooden Cold-Pressed Gingelly Oil (5L)', price: 2000 }
    ];
    
    function getCurrentPrice(product) {
      const selectedSizeOption = document.querySelector(`.size-option.active[data-product="${product}"]`);
      return selectedSizeOption ? parseInt(selectedSizeOption.dataset.price) : 225;
    }
    // Legacy calls safety: manual selection removed, keep no-op to avoid runtime errors
    function toggleManualSelection() {}
    
    /* Manual selection functions removed - no longer needed
    function toggleManualSelection() {
      const manualDiv = document.getElementById('manualSelection');
      if (orderItems.length === 0) {
        manualDiv.style.display = 'block';
        if (document.getElementById('oilSelectors').children.length === 0) {
          addManualOil(); // Add first selector
        }
      } else {
        manualDiv.style.display = 'none';
      }
    }
    
    function addManualOil() {
      const selectorsDiv = document.getElementById('oilSelectors');
      
      // Limit to maximum 3 oils (since we only have 3 types)
      if (selectorsDiv.children.length >= 3) {
        showToast('Maximum 3 oils can be selected');
        return;
      }
      
      manualSelectionCounter++;
      const newSelector = document.createElement('div');
      newSelector.id = 'manual-' + manualSelectionCounter;
      newSelector.style.cssText = 'display:grid; grid-template-columns:2fr 1fr auto; gap:10px; margin-bottom:10px; align-items:end;';
      
      newSelector.innerHTML = `
        <div>
          <label style="font-size:13px; font-weight:600; color:var(--green);">Select Oil</label>
          <select class="manual-oil-select" style="width:100%; padding:10px; border:2px solid var(--green); border-radius:8px; font-size:14px;">
            <option value="">Choose an oil...</option>
            ${oilOptions.map(oil => `<option value="${oil.id}" data-price="${oil.price}">${oil.name} - â‚¹${oil.price}</option>`).join('')}
          </select>
        </div>
        <div>
          <label style="font-size:13px; font-weight:600; color:var(--green);">Quantity</label>
          <input type="number" class="manual-qty" min="1" max="10" value="1" style="width:100%; padding:10px; border:2px solid var(--green); border-radius:8px; font-size:14px;" />
        </div>
        <button type="button" onclick="removeManualOil('manual-${manualSelectionCounter}')" style="padding:10px 14px; background:var(--green); color:white; border:none; border-radius:8px; cursor:pointer; font-weight:700;">âœ•</button>
      `;
      
      selectorsDiv.appendChild(newSelector);
      
      // Add change listener to update summary
      newSelector.querySelector('.manual-oil-select').addEventListener('change', updateManualSummary);
      newSelector.querySelector('.manual-qty').addEventListener('input', updateManualSummary);
      
      // Hide "Add Another Oil" button if we've reached 3 oils
      if (selectorsDiv.children.length >= 3) {
        document.querySelector('#manualSelection button[onclick="addManualOil()"]').style.display = 'none';
      }
    }
    
    function removeManualOil(id) {
      const elem = document.getElementById(id);
      if (elem) elem.remove();
      updateManualSummary();
      
      // Show "Add Another Oil" button again if we're below 3 oils
      const selectorsDiv = document.getElementById('oilSelectors');
      if (selectorsDiv.children.length < 3) {
        document.querySelector('#manualSelection button[onclick="addManualOil()"]').style.display = 'inline-block';
      }
    }
    
    function updateManualSummary() {
      const selectors = document.querySelectorAll('#oilSelectors > div');
      let summary = '';
      let total = 0;
      let count = 0;
      
      selectors.forEach((selector, index) => {
        const select = selector.querySelector('.manual-oil-select');
        const qtyInput = selector.querySelector('.manual-qty');
        
        if (select && select.value) {
          const selectedOption = select.options[select.selectedIndex];
          const oilName = selectedOption.text.split(' - ')[0];
          const price = parseInt(selectedOption.dataset.price);
          const qty = parseInt(qtyInput.value) || 1;
          const itemTotal = price * qty;
          
          count++;
          summary += `${count}. ${oilName} = â‚¹${price} Ã— ${qty} = â‚¹${itemTotal}\n`;
          total += itemTotal;
        }
      });
      
      if (summary) {
        summary += `\nTotal Amount: â‚¹${total}\n\n* Delivery charges extra (to be discussed during payment confirmation)`;
      }
      
      const orderDetailsTextarea = document.getElementById('orderDetails');
      const totalAmountField = document.getElementById('totalAmount');
      
      orderDetailsTextarea.value = summary;
      totalAmountField.value = total.toString();
      
      // Auto-expand textarea to fit content
      orderDetailsTextarea.style.height = 'auto';
      orderDetailsTextarea.style.height = Math.max(80, orderDetailsTextarea.scrollHeight) + 'px';
    }
    */ // End of removed manual selection functions
    
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // If user clicks the order form with an empty cart, redirect them to oils section
    document.addEventListener('DOMContentLoaded', () => {
      const orderSection = document.getElementById('order');
      if (orderSection) {
        orderSection.addEventListener('click', function(e) {
          // Ignore clicks on buttons (Submit / Clear) â€“ they already trigger validation
          if (e.target.tagName === 'BUTTON') return;
          // If cart/orderItems is empty, guide user back to product selection
          if (Array.isArray(orderItems) && orderItems.length === 0) {
            e.preventDefault();
            e.stopPropagation();
            showToast('Select oil then proceed to order');
            const oilsSection = document.getElementById('oils');
            if (oilsSection) {
              oilsSection.scrollIntoView({ behavior: 'smooth' });
            }
          }
        }, true); // capture to intercept before inputs
      }
    });

    // Form guard removed - all fields should be editable
    
    function showAddToCartModal(details) {
  // Use toast instead of modal
  if (typeof showToast === 'function') {
    showToast(details);
  } else {
    var t = document.querySelector('.toast') || (function(){ var el=document.createElement('div'); el.className='toast'; document.body.appendChild(el); return el; })();
    t.textContent = details;
    t.classList.add('show');
    setTimeout(function(){ t.classList.remove('show'); }, 3000);
  }
  // Do NOT open the modal
  return;
}

    function hideAddToCartModal() {
      document.getElementById('addToCartModal').classList.remove('show');
    }

    function continueShoppingFromModal() {
      hideAddToCartModal();
    }

    function checkoutFromModal() {
      hideAddToCartModal();
      document.getElementById('order').scrollIntoView({ behavior: 'smooth' });
    }

    function addToOrder(id, productName, price) {
      // Get selected size info
      const selectedSizeOption = document.querySelector(`.size-option.active[data-product="${id}"]`);
      const selectedSize = selectedSizeOption ? selectedSizeOption.dataset.size : '500ml';
      const selectedPrice = selectedSizeOption ? parseInt(selectedSizeOption.dataset.price) : price;
      
      const qty = parseInt(document.getElementById('qty-' + id).value);
      const total = selectedPrice * qty;
      
      // Create unique item key with size
      const itemKey = `${id}-${selectedSize}`;
      const fullProductName = `${productName} (${selectedSize})`;
      
      // Check if item already exists, update quantity
      const existingIndex = orderItems.findIndex(item => item.itemKey === itemKey);
      if (existingIndex > -1) {
        orderItems[existingIndex].qty = qty;
        orderItems[existingIndex].total = total;
        const message = `Updated: ${fullProductName} Ã— ${qty} = â‚¹${total}`;
        showAddToCartModal(message);
      } else {
        orderItems.push({ 
          id, 
          itemKey, 
          productName: fullProductName, 
          originalName: productName,
          size: selectedSize,
          price: selectedPrice, 
          qty, 
          total 
        });
        const message = `Added to cart: ${fullProductName} Ã— ${qty} = â‚¹${total}`;
        showAddToCartModal(message);
      }
      
      updateOrderDetails();
      toggleManualSelection(); // Hide manual selection when items added
    }
    
    function updateOrderDetails() {
      const orderDetailsTextarea = document.getElementById('orderDetails');
      const totalAmountField = document.getElementById('totalAmount');
      
      // Update cart display
      updateCartDisplay();
      
      if (orderItems.length === 0) {
        orderDetailsTextarea.value = '';
        orderDetailsTextarea.style.height = '80px';
        totalAmountField.value = '0';
        // Save empty cart to localStorage
        saveCartToStorage();
        // Update sticky nav state
        if (typeof updateStickyNav === 'function') updateStickyNav();
        return;
      }
      
      let orderText = '';
      let grandTotal = 0;
      
      orderItems.forEach((item, index) => {
        orderText += `${index + 1}. ${item.productName} = â‚¹${item.price} Ã— ${item.qty} = â‚¹${item.total}\n`;
        grandTotal += item.total;
      });
      
      orderText += `\nTotal Amount: â‚¹${grandTotal}\n\n* Delivery charges extra (to be discussed during payment confirmation)`;
      orderDetailsTextarea.value = orderText;
      
      // Set the hidden total amount field
      totalAmountField.value = grandTotal.toString();
      
      // Auto-expand textarea to fit content
      orderDetailsTextarea.style.height = 'auto';
      orderDetailsTextarea.style.height = Math.max(80, orderDetailsTextarea.scrollHeight) + 'px';
      
      // Save cart to localStorage whenever it's updated
      saveCartToStorage();
      
      // Update sticky nav state
      if (typeof updateStickyNav === 'function') updateStickyNav();
    }
    
    function clearOrder() {
  // Clear data & refresh UI
  orderItems = [];
  updateOrderDetails();

  // Reset qty inputs
  ['qty-coconut','qty-groundnut','qty-gingelly'].forEach(function(id){
    var el=document.getElementById(id);
    if (el) el.value=1;
  });

  // Clear manual selections
  var oilSel=document.getElementById('oilSelectors');
  if (oilSel) oilSel.innerHTML='';
  if (typeof manualSelectionCounter!=='undefined') manualSelectionCounter=0;
  if (typeof toggleManualSelection==='function') toggleManualSelection();

  // ---- HARD CLOSE cart dropdown/popup and mark as closed ----
  try { isCartOpen = false; } catch(e){}
  var dd=document.getElementById('cartDropdown');
  var bd=document.getElementById('cartBackdrop');
  if (dd) dd.classList.remove('open');
  if (bd) bd.classList.remove('visible');
  document.body.classList.remove('cart-open');
  // Also close any generic overlay classes
  document.querySelectorAll('.cart, .cart-overlay, .cart-panel, .cart-popup, .cart-drawer')
    .forEach(function(p){ p.classList.remove('open','show','visible','active'); p.style.display=''; });

  // ---- Scroll to top & toast ----
  try { window.scrollTo({top:0, behavior:'smooth'}); } catch(e) { window.scrollTo(0,0); }
  document.documentElement.scrollTop = 0;
  document.body.scrollTop = 0;

  if (typeof showToast==='function') {
    showToast('Cart cleared successfully!');
  } else {
    var toast=document.getElementById('toast');
    if (!toast){ toast=document.createElement('div'); toast.id='toast'; toast.className='toast'; document.body.appendChild(toast); }
    toast.textContent='Cart cleared successfully!';
    toast.classList.add('show');
    setTimeout(function(){ toast.classList.remove('show'); }, 3000);
  }
}

    // Form submission
    function handleSubmit(e) {
      e.preventDefault();
      
      // Get form data for validation
      const form = e.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      const name = form.name.value.trim();
      const phone = form.phone.value.trim();
      const address = form.address.value.trim();
      
      // Validate name
      if (!name || name.length < 2) {
        alert('Please enter a valid name (at least 2 characters).');
        form.name.focus();
        return;
      }
      
      if (!/^[A-Za-z\s]+$/.test(name)) {
        alert('Name should contain only letters and spaces.');
        form.name.focus();
        return;
      }
      
      // Validate phone
      if (!phone) {
        alert('Please enter your phone number.');
        form.phone.focus();
        return;
      }
      
      // Remove all non-digits for phone validation
      const phoneDigits = phone.replace(/\D/g, '');
      if (phoneDigits.length < 10 || phoneDigits.length > 15) {
        alert('Please enter a valid phone number (10-15 digits).');
        form.phone.focus();
        return;
      }
      
      // Validate address
      if (!address || address.length < 10) {
        alert('Please enter a complete address (at least 10 characters).');
        form.address.focus();
        return;
      }
      
      // Check if either orderItems has items OR manual selection has data
      const hasCartItems = orderItems.length > 0;
      const manualSelectors = document.querySelectorAll('.manual-oil-select');
      let hasManualSelection = false;
      
      manualSelectors.forEach(select => {
        if (select.value) {
          hasManualSelection = true;
        }
      });
      
      if (!hasCartItems && !hasManualSelection) {
        alert('Please select at least one oil and quantity before placing your order.');
        return;
      }
      
      // If using manual selection, update the order details from manual inputs
      if (!hasCartItems && hasManualSelection) {
        updateManualSummary();
      }
      
      // Show loading state
      submitBtn.classList.add('loading');
      submitBtn.disabled = true;
      
      const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSflC-Ev08-1K4ULCfcscEw6WsCDV-tm99cGCAIt_V0-FC7lEg/formResponse';
      
      const formData = new FormData(e.target);
      const googleFormData = new FormData();
      
      // Map form fields to Google Form entry IDs
      googleFormData.append('entry.1725501823', formData.get('name'));        // Full Name
      googleFormData.append('entry.1067964574', formData.get('phone'));       // Phone / WhatsApp
      googleFormData.append('entry.815750809', formData.get('address'));      // Address
      googleFormData.append('entry.1998696792', formData.get('orderDetails')); // Order Details
      googleFormData.append('entry.185274423', formData.get('notes') || 'None'); // Additional Notes
      googleFormData.append('entry.1620525141', formData.get('totalAmount') || '0'); // Total Amount (Replace 123456789 with actual entry ID from your Google Form)
      
      // Submit to Google Form
      fetch(GOOGLE_FORM_URL, {
        method: 'POST',
        body: googleFormData,
        mode: 'no-cors'
      }).then(() => {
        // Remove loading state
        submitBtn.classList.remove('loading');
        submitBtn.disabled = false;
        
        // Success - show confirmation and open WhatsApp
        const name = formData.get('name');
        const phone = formData.get('phone');
        const address = formData.get('address');
        const orderDetails = formData.get('orderDetails');
        const notes = formData.get('notes') || 'None';
        
        // WhatsApp message
        const whatsappNumber = '918925295844'; // WhatsApp number (include country code, no + or spaces)
        const whatsappMessage = encodeURIComponent(
          `*New Order from ${name}*\n\n` +
          `ðŸ“ž Phone: ${phone}\n` +
          `ðŸ“ Address: ${address}\n\n` +
          `*Order Details:*\n${orderDetails}\n\n` +
          `*Additional Notes:*\n${notes}\n\n` +
          `Please confirm payment and delivery details.`
        );
        
        const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${whatsappMessage}`;
        
        // Show custom modal
        showSuccessModal(whatsappUrl);
        
        // Clear form and scroll to top
        setTimeout(() => {
          e.target.reset();
          clearOrder();
          // Clear saved form data from localStorage
          localStorage.removeItem('arumeeFormData');
          window.scrollTo({top: 0, behavior: 'smooth'});
        }, 1000);
        
      }).catch((error) => {
        // Remove loading state
        submitBtn.classList.remove('loading');
        submitBtn.disabled = false;
        
        // Error - don't clear anything
        console.error('Submission error:', error);
        alert('There was an error submitting your order. Please try again or contact us directly.');
      });
    }
    
    // Scroll to top on page load/refresh - prevent browser scroll restoration
    if ('scrollRestoration' in history) {
      history.scrollRestoration = 'manual';
    }
    window.addEventListener('beforeunload', () => {
      window.scrollTo(0, 0);
    });
    window.addEventListener('load', () => {
      window.scrollTo(0, 0);
    });
    
    // Sticky Navigation - Smart Context-Aware Header
    const stickyNav = document.getElementById('stickyNav');
    const cartTab = document.getElementById('cartTab');
    const navCartBtn = document.getElementById('navCartBtn');
    const navOilsBtn = document.getElementById('navOilsBtn');
    const navCartCount = document.getElementById('navCartCount');
    let lastScroll = 0;
    
    function updateStickyNav() {
      const currentScroll = window.pageYOffset;
      const hasItemsInCart = orderItems && orderItems.length > 0;
      const oilsSection = document.getElementById('oils');
      const passedOils = oilsSection ? currentScroll > (oilsSection.offsetTop + oilsSection.offsetHeight - 200) : false;
      // Use matchMedia to match CSS media query behavior (works in DevTools mobile view)
      const isMobile = window.matchMedia('(max-width: 768px)').matches;

      // Desktop: always hide sticky nav to avoid duplicate cart controls
      if (!isMobile) {
        stickyNav.classList.remove('visible');
        if (navCartBtn) navCartBtn.style.display = 'none';
        if (navOilsBtn) navOilsBtn.style.display = 'none';
        if (cartTab) cartTab.style.display = 'flex'; // unchanged desktop behavior
        lastScroll = currentScroll;
        return;
      }
      
      // MOBILE BEHAVIOR (FINAL):
      // - Floating cart removed entirely.
      // - Sticky nav shows ONLY when cart has items.
      // - Before any items added, no cart UI appears.
      if (!hasItemsInCart) {
        stickyNav.classList.remove('visible');
        navCartBtn.style.display = 'none';
        navOilsBtn.style.display = 'none';
        if (cartTab) cartTab.style.display = 'none';
      } else {
        stickyNav.classList.add('visible');
        navCartBtn.style.display = 'inline-flex';
        navCartCount.textContent = orderItems.length;
        if (passedOils) {
          navOilsBtn.style.display = 'inline-flex';
        } else {
          navOilsBtn.style.display = 'none';
        }
        if (cartTab) cartTab.style.display = 'none';
      }
      
      lastScroll = currentScroll;
    }
    
  // Update on scroll and resize (resize covers switching between mobile/desktop)
  window.addEventListener('scroll', updateStickyNav);
  window.addEventListener('resize', updateStickyNav);
    
    // Call initially and whenever cart changes
    updateStickyNav();
    
    // Also on DOMContentLoaded for faster trigger
    document.addEventListener('DOMContentLoaded', () => {
      window.scrollTo(0, 0);
      
      // Load cart from localStorage FIRST before updating display
      loadCartFromStorage();
      updateOrderDetails();
      
      // Mark that initial load is complete (enable cart count animations)
      setTimeout(() => {
        isInitialLoad = false;
      }, 100);
      
      // Check if we need to scroll to order form (when coming from other pages)
      if (sessionStorage.getItem('scrollToOrder') === 'true') {
        sessionStorage.removeItem('scrollToOrder');
        // Wait for page to fully render, then scroll to order section
        setTimeout(() => {
          const orderSection = document.getElementById('order');
          if (orderSection) {
            orderSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            // Focus on first input field after scroll
            setTimeout(() => {
              const nameInput = document.querySelector('input[name="name"]');
              if (nameInput) {
                nameInput.focus();
              }
            }, 600);
          }
        }, 300);
      }
      
      // Add cart button click listeners (for better mobile support)
      const cartTab = document.getElementById('cartTab');
      const cartBackdrop = document.getElementById('cartBackdrop');
      const navCartBtn = document.getElementById('navCartBtn');
      
      if (cartTab) {
        cartTab.removeAttribute('onclick');
        cartTab.addEventListener('click', toggleCart);
        // Rely only on click; touch generates a synthetic click. Avoid duplicate touchend listener.
      }
      
      if (cartBackdrop) {
        cartBackdrop.removeAttribute('onclick');
        cartBackdrop.addEventListener('click', toggleCart);
      }
      
      if (navCartBtn) {
        navCartBtn.removeAttribute('onclick');
        navCartBtn.addEventListener('click', toggleCart);
      }

      // Delegated handlers for quantity steppers & add-to-order buttons (accessibility-friendly, removes inline JS)
      document.addEventListener('click', function(e) {
        const target = e.target;
        if (!target) return;

        // Quantity buttons
        if (target.classList && target.classList.contains('qty-btn')) {
          const product = target.dataset.product;
          const action = target.dataset.action;
          if (product && action) {
            if (action === 'inc') {
              increaseQty(product, e);
            } else if (action === 'dec') {
              decreaseQty(product, e);
            }
          }
          return; // Avoid triggering cart outside click logic
        }

        // Add to order buttons
        if (target.classList && target.classList.contains('add-to-order')) {
          const product = target.dataset.product;
          const name = target.dataset.name || 'Selected Oil';
          if (product) {
            const price = getCurrentPrice(product);
            addToOrder(product, name, price);
            target.blur();
          }
          return; // Prevent close-cart handler from running
        }
      });
      
      // Add form validation listeners
      const nameInput = document.querySelector('input[name="name"]');
      const phoneInput = document.querySelector('input[name="phone"]');
      const addressInput = document.querySelector('input[name="address"]');
      
      // Click outside cart to close (but not when clicking cart button)
      document.addEventListener('click', function(e) {
        if (preventCartClose) return;
        
        const cartDropdown = document.getElementById('cartDropdown');
        
        if (isCartOpen && 
            !cartTab.contains(e.target) && 
            !cartDropdown.contains(e.target) &&
            e.target !== cartTab) {
          toggleCart();
        }
      });
      
      // Real-time phone number formatting
      phoneInput.addEventListener('input', function(e) {
        // Allow only numbers, +, spaces, and hyphens
        let value = e.target.value.replace(/[^\d\+\s\-]/g, '');
        e.target.value = value;
      });
      
      // Real-time name validation
      nameInput.addEventListener('input', function(e) {
        // Allow only letters and spaces
        let value = e.target.value.replace(/[^A-Za-z\s]/g, '');
        e.target.value = value;
      });
      
      // DEBUG: Test form editability
  /* dev debug removed for production: form input presence */
  /* dev debug removed for production: name input props */
      
      // Make all form fields always editable
      const notesInput = document.querySelector('textarea[name="notes"]');
      function ensureEditable() {
        [nameInput, phoneInput, addressInput, notesInput].forEach(input => {
          if (input && input.id !== 'orderDetails') {
            input.disabled = false;
            input.readOnly = false;
          }
        });
      }
      ensureEditable();
      
      // Add size option click handlers
      document.querySelectorAll('.size-option').forEach(option => {
        option.addEventListener('click', function() {
          const product = this.dataset.product;
          const size = this.dataset.size;
          const price = this.dataset.price;
          
          // Remove active class from all options for this product
          document.querySelectorAll(`.size-option[data-product="${product}"]`).forEach(opt => {
            opt.classList.remove('active');
          });
          
          // Add active class to clicked option
          this.classList.add('active');
          
          // Update price display
          const priceElement = document.getElementById(`${product}-price`);
          if (priceElement) {
            priceElement.innerHTML = `â‚¹${price} <span>/ ${size}</span>`;
          }
          
          // Update pill display
          const pillElement = document.getElementById(`${product}-pill`);
          if (pillElement) {
            const productType = product.charAt(0).toUpperCase() + product.slice(1);
            pillElement.textContent = `${productType} â€¢ ${size}`;
          }
        });
      });

      // Ensure no entire product card appears "selected" on load due to lingering focus/hover
      // Remove any accidental focus styling and force neutral state
      const productCards = document.querySelectorAll('.grid > .card');
      productCards.forEach(card => {
        card.classList.remove('selected');
        card.blur?.();
        // Remove tabindex to prevent unintended focus
        card.removeAttribute('tabindex');
      });

      // If a card was auto-focused, move focus to body to avoid highlight
      if (document.activeElement && document.activeElement.closest && document.activeElement.closest('.grid > .card')) {
        document.activeElement.blur();
        document.body.focus();
      }

      // (Optional) Only show active size highlight after first user interaction
      // Add a one-time listener to mark that user has intentionally interacted
      let userInteracted = false;
      function markInteraction() { userInteracted = true; window.removeEventListener('pointerdown', markInteraction, true); }
      window.addEventListener('pointerdown', markInteraction, true);

      // Before user interacts, strip "active" visual class from size-options except default 500ml
      document.querySelectorAll('.size-options').forEach(group => {
        if (!userInteracted) {
          group.querySelectorAll('.size-option').forEach(opt => {
            // Keep first (assumed default) active; remove others to avoid mid-tile preselection look
            if (!opt.matches(':first-child')) opt.classList.remove('active');
          });
        }
      });
    });
    
    // Fade in on scroll with improved observer
    const sections = document.querySelectorAll('section');
    const observer = new IntersectionObserver(entries => {
      entries.forEach(e => { 
        if (e.isIntersecting) {
          e.target.classList.add('visible');
          // Optionally stop observing once visible for better performance
          observer.unobserve(e.target);
        }
      });
    }, {threshold: 0.15, rootMargin: '0px 0px -50px 0px'});
    sections.forEach(sec => observer.observe(sec));

    // Scroll-top visibility with throttle
    const topBtn = document.getElementById('scrollTop');
    let scrollTimeout;
    window.addEventListener('scroll', () => {
      if (scrollTimeout) clearTimeout(scrollTimeout);
      
      const shouldShow = window.scrollY > 500;
      if (shouldShow) {
        topBtn.style.display = 'flex';
      } else {
        scrollTimeout = setTimeout(() => {
          topBtn.style.display = 'none';
        }, 200);
      }
    }, { passive: true });
    
    // Load saved data when page loads
    window.addEventListener('load', () => {
      loadCartFromStorage();
      // Ensure form fields are cleared on full page load
      clearFormFields();
    });
    
    // Also clear on pageshow (handles bfcache restore)
    window.addEventListener('pageshow', (e) => {
      if (e.persisted) {
        clearFormFields();
      }
      
      // Helper: detect background color by sampling image corners and remove pixels similar to that color
      // NOTE: This requires the image to be same-origin or served with CORS headers; otherwise canvas will be tainted.
      // Improved background removal: higher default threshold + soft feathering
      // Attempts to remove a uniform background color (estimated from image corners)
      // and applies a gentle alpha ramp to avoid hard halos.
      function removeWhiteBackground(img, threshold = 70, feather = 20) {
        return new Promise((resolve) => {
          try {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = img.naturalWidth || img.width;
            canvas.height = img.naturalHeight || img.height;
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

            // helper: average color in a small rect
            function avgColor(x, y, w, h) {
              try {
                const d = ctx.getImageData(x, y, w, h).data;
                let r = 0, g = 0, b = 0, n = 0;
                for (let i = 0; i < d.length; i += 4) {
                  r += d[i]; g += d[i + 1]; b += d[i + 2]; n++;
                }
                return { r: Math.round(r / n), g: Math.round(g / n), b: Math.round(b / n) };
              } catch (e) { return null; }
            }

            // Sample small areas in the four corners to estimate background color
            const sample = Math.max(6, Math.floor(Math.min(canvas.width, canvas.height) * 0.03));
            const corners = [];
            corners.push(avgColor(0, 0, sample, sample));
            corners.push(avgColor(canvas.width - sample, 0, sample, sample));
            corners.push(avgColor(0, canvas.height - sample, sample, sample));
            corners.push(avgColor(canvas.width - sample, canvas.height - sample, sample, sample));

            // compute average of non-null corners
            let br = 0, bg = 0, bb = 0, count = 0;
            corners.forEach(c => { if (c) { br += c.r; bg += c.g; bb += c.b; count++; } });
            if (count === 0) { resolve(null); return; }
            const bgColor = { r: Math.round(br / count), g: Math.round(bg / count), b: Math.round(bb / count) };

            try {
              const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
              const data = imageData.data;
              const inner = Math.max(0, threshold);
              const outer = inner + Math.max(0, feather);

              for (let i = 0; i < data.length; i += 4) {
                const r = data[i], g = data[i + 1], b = data[i + 2];
                const dr = r - bgColor.r, dg = g - bgColor.g, db = b - bgColor.b;
                const distSq = dr * dr + dg * dg + db * db;
                const dist = Math.sqrt(distSq);

                if (dist <= inner) {
                  // Fully background â€” make transparent
                  data[i + 3] = 0;
                } else if (dist <= outer) {
                  // In the feather zone â€” set partial alpha to soften edges
                  const t = (dist - inner) / (outer - inner); // 0..1
                  // newAlpha scales from 0 (at inner) to 255 (at outer)
                  const newAlpha = Math.round(255 * t);
                  // Use the smaller of existing alpha and newAlpha to avoid increasing alpha
                  data[i + 3] = Math.min(data[i + 3], newAlpha);
                }
                // else: leave opaque pixels alone
              }

              ctx.putImageData(imageData, 0, 0);

              // Return transparent background version (PNG) to eliminate white halo
              try {
                const newSrc = canvas.toDataURL('image/png');
                // background processed
                resolve(newSrc);
              } catch (err2) {
                try { const fallbackSrc = canvas.toDataURL(); resolve(fallbackSrc); } catch (e) { resolve(null); }
              }
            } catch (err) {
              console.warn('Could not process image (CORS?):', err);
              resolve(null);
            }
          } catch (e) {
            console.warn('Background removal failed:', e);
            resolve(null);
          }
        });
      }

      // Add image zoom functionality and attempt background removal for product images
      const productImages = document.querySelectorAll('.pic-wrap img');
      productImages.forEach(img => {
        // Ensure we process after the image has loaded
        function processAndWire() {
          removeWhiteBackground(img).then(newSrc => {
            if (newSrc) {
              img.src = newSrc; // replace with processed image (transparent background)
            }
            // wire zoom behavior
            img.parentElement.addEventListener('click', (e) => {
              e.preventDefault();
              const imageSrc = img.src;
              const caption = img.alt || 'Product Image';
              showImageZoom(imageSrc, caption);
            });
          });
        }

        if (img.complete && img.naturalWidth) {
          processAndWire();
        } else {
          img.addEventListener('load', processAndWire);
        }
      });
      
      // Close zoom overlay when clicking outside image
      document.getElementById('imageZoomOverlay').addEventListener('click', (e) => {
        if (e.target.id === 'imageZoomOverlay') {
          closeImageZoom();
        }
      });
      
      // Close zoom with Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeImageZoom();
        }
      });
    });
    
    // Refresh interception removed to allow seamless navigation between site pages without warning.
    // (Keydown & beforeunload handlers for refresh were intentionally removed.)

    /* Carousel active-slide detection: MOBILE ONLY - no border highlight on desktop */
    (function setupCarouselActiveSlide() {
      // Only enable carousel active-slide logic on mobile
      if (window.innerWidth > 768) return;

      const carousel = document.querySelector('.grid');
      if (!carousel) return;

      const cards = Array.from(carousel.querySelectorAll('.card'));
      if (!cards.length) return;

      // Throttle utility to avoid too many calculations while scrolling
      function throttle(fn, wait) {
        let last = 0;
        let timeout = null;
        return function(...args) {
          const now = Date.now();
          const remaining = wait - (now - last);
          if (remaining <= 0) {
            if (timeout) { clearTimeout(timeout); timeout = null; }
            last = now;
            fn.apply(this, args);
          } else if (!timeout) {
            timeout = setTimeout(() => {
              last = Date.now();
              timeout = null;
              fn.apply(this, args);
            }, remaining);
          }
        };
      }

      function updateActiveSlide() {
        const carouselRect = carousel.getBoundingClientRect();
        const carouselCenter = carouselRect.left + carouselRect.width / 2;

        let closest = null;
        let minDist = Infinity;

        cards.forEach(card => {
          const rect = card.getBoundingClientRect();
          const cardCenter = rect.left + rect.width / 2;
          const dist = Math.abs(carouselCenter - cardCenter);
          if (dist < minDist) {
            minDist = dist;
            closest = card;
          }
        });

        cards.forEach(c => c.classList.toggle('active-slide', c === closest));
      }

      // Do NOT initialize an active slide on load to prevent a default selected border.
      // Active state will be applied only after user interaction (scroll/pointer).
      let carouselActivated = false;
      function activateCarouselIfNeeded() {
        if (!carouselActivated) {
          carouselActivated = true;
          updateActiveSlide();
        }
      }
      // First user scroll/pointer/resize will trigger activation
      carousel.addEventListener('pointerdown', activateCarouselIfNeeded, { once: true });
      carousel.addEventListener('wheel', activateCarouselIfNeeded, { once: true });
      window.addEventListener('keydown', (e) => { if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') activateCarouselIfNeeded(); }, { once: true });

      // Listen to scroll and resize events
      const throttled = throttle(updateActiveSlide, 80);
      carousel.addEventListener('scroll', function(e){
        if (!carouselActivated) activateCarouselIfNeeded();
        throttled();
      }, { passive: true });
      window.addEventListener('resize', throttled);

      // Also update when dynamic content changes (images load)
      cards.forEach(imgCard => {
        const img = imgCard.querySelector('img');
        if (img && !img.complete) img.addEventListener('load', throttled);
      });
    })();
  </script>
<script>
// --- Mobile carousel active-slide centering fix ---
document.addEventListener("DOMContentLoaded", function () {
  const carousel = document.querySelector("#oils .grid");
  if (!carousel) return;

  // Run only on mobile viewports (horizontal scroll)
  if (window.innerWidth <= 768) {
    const cards = Array.from(carousel.querySelectorAll(".card"));
    if (!cards.length) return;

    
    // Robust centering of first card inside a scroll-snap container
    const firstCard = cards[0];
    const prevSnap = carousel.style.scrollSnapType;
    // Temporarily disable snap so we can position precisely
    carousel.style.scrollSnapType = 'none';
    carousel.scrollLeft = 0; // reset
    // Position so first card center aligns to container center
    const centerIt = () => {
      try {
        // Use native snap-aware centering after restoring snap
        carousel.style.scrollSnapType = prevSnap || 'x mandatory';
        // Ensure it's exactly centered in the snap container
        firstCard.scrollIntoView({ behavior: 'auto', inline: 'center', block: 'nearest' });
      } catch(e) {
        // Fallback: math positioning
        const targetLeft = firstCard.offsetLeft - (carousel.clientWidth - firstCard.clientWidth) / 2;
        carousel.scrollLeft = Math.max(0, targetLeft);
      }
      // Skip initial activation â€“ wait for interaction to avoid default border highlighting a middle card.
      let mobileCarouselActivated = false;
      function activateMobileCarousel() {
        if (!mobileCarouselActivated) {
          mobileCarouselActivated = true;
          updateActiveSlide();
        }
      }
      carousel.addEventListener('scroll', activateMobileCarousel, { once: true });
      carousel.addEventListener('touchstart', activateMobileCarousel, { once: true });
      window.addEventListener('keydown', (e) => { if (['ArrowRight','ArrowLeft'].includes(e.key)) activateMobileCarousel(); }, { once: true });
    };
    // Wait a tick for layout (images/fonts) then center
    requestAnimationFrame(() => requestAnimationFrame(centerIt));


    function throttle(fn, wait) {
      let ticking = false, lastArgs = null;
      return function (...args) {
        lastArgs = args;
        if (!ticking) {
          ticking = true;
          requestAnimationFrame(() => {
            fn.apply(this, lastArgs);
            ticking = false;
          });
        }
      };
    }

    function updateActiveSlide() {
      const center = carousel.scrollLeft + carousel.clientWidth / 2;
      let bestIdx = 0;
      let bestDist = Infinity;

      cards.forEach((card, idx) => {
        const cardCenter = card.offsetLeft + card.clientWidth / 2;
        const dist = Math.abs(cardCenter - center);
        if (dist < bestDist) { bestDist = dist; bestIdx = idx; }
      });

      cards.forEach((card, idx) => {
        card.classList.toggle("active-slide", idx === bestIdx);
      });
    }

    const throttledUpdate = throttle(updateActiveSlide, 80);
    carousel.addEventListener("scroll", throttledUpdate, { passive: true });
    window.addEventListener("resize", throttledUpdate);
    window.addEventListener("orientationchange", throttledUpdate);
    cards.forEach((c) => {
      const img = c.querySelector("img");
      if (img && !img.complete) img.addEventListener("load", throttledUpdate);
    });

  // No initial activation; classes applied only after user interaction.
  }
});
</script>
<script>
// --- Cart animation helpers ---
document.addEventListener('DOMContentLoaded', function(){
  const cartDropdown = document.getElementById('cartDropdown');
  const backdrop = document.getElementById('cartBackdrop');
  // Ensure it's displayed for animation system; opacity/transform handle visibility
  cartDropdown.style.display = 'block';

  // Click outside closes (unless we're in the middle of quantity edits)
  backdrop.addEventListener('click', function(){
    if (preventCartClose) return;
    if (isCartOpen) toggleCart();
  });

  // ESC to close
  document.addEventListener('keydown', function(e){
    if (e.key === 'Escape' && isCartOpen && !preventCartClose) {
      toggleCart();
    }
  });
});
</script>
<script>
// --- Desktop safety: ensure no 'active-slide' class remains on desktop ---
document.addEventListener('DOMContentLoaded', function(){
  // Mark body ready for hero fade-in once fonts + images have a chance to load
  window.addEventListener('load', () => {
    document.body.classList.add('hero-ready');
  });
  function cleanupActiveForDesktop(){
    if (window.innerWidth > 768) {
      document.querySelectorAll('#oils .grid .card.active-slide').forEach(el => el.classList.remove('active-slide'));
    }
  }
  cleanupActiveForDesktop();
  window.addEventListener('resize', cleanupActiveForDesktop);
});
</script>
<script id="toast-normalize-guard">
// Normalize text for Add/Update cart toasts and avoid modal
(function(){
  var lastToastAt = 0;
  function showToastOnce(msg){
    var now = Date.now();
    if (now - lastToastAt < 350) return;
    lastToastAt = now;
    if (typeof showToast === 'function') return showToast(msg);
    var t = document.getElementById('toast') || document.querySelector('.toast');
    if (!t) {
      t = document.createElement('div');
      t.id = 'toast';
      t.className = 'toast';
      document.body.appendChild(t);
    }
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(function(){ t.classList.remove('show'); }, 3000);
  }
  if (typeof window.showAddToCartModal === 'function' && !window.showAddToCartModal.__normalized) {
    var orig = window.showAddToCartModal;
    window.showAddToCartModal = function(details){
      try{
        var text = String(details || '');
        var m = text.match(/:\s*(.+?)\s*\(\s*([^)]+)\s*\)\s*Ã—\s*(\d+)/); // capture "Name (500ml) Ã— 2"
        if (m){
          var name = m[1] + ' ' + m[2]; // "Coconut 500ml"
          var qty = m[3];
          if (text.indexOf('Updated') === 0){
            text = 'Updated â€” ' + name + ' Ã— ' + qty;
          } else {
            text = 'Added â€” ' + name + ' Ã— ' + qty;
          }
        } else {
          if (text.indexOf('Updated') === 0) text = 'Updated';
          else if (text.indexOf('Added to cart') === 0) text = 'Added';
        }
        showToastOnce(text);
      }catch(e){
        showToastOnce('Added');
      }
      return; // never open modal
    };
    window.showAddToCartModal.__normalized = true;
  }
})();</script></body>
</html>
